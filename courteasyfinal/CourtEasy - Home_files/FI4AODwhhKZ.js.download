if (self.CavalryLogger) { CavalryLogger.start_js(["ifoZV"]); }

__d("XPagesSendFriendInviteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/friend_invite/send/",{invitee:{type:"Int",required:!0},page_id:{type:"Int",required:!0},ref:{type:"String",required:!0},invite_note:{type:"String",defaultValue:""},send_in_messenger:{type:"Bool",defaultValue:!1},invite_callsite:{type:"String",defaultValue:"unknown"}})}),null);
__d("PagesFriendInviterSuggestions.react",["cx","fbt","Arbiter","AsyncRequest","FlexibleBlock.react","Image.react","ImageBlock.react","InlineBlock.react","Link.react","React","XPagesSendFriendInviteController","XUIButton.react","XUIGrayText.react","XUISpinner.react","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={recentlyInvitedIDs:[]},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this;if(this.props.showNoResultsIndicator&&this.props.invitees.length===0)return b("React").jsx("ul",{className:"_5kwh",children:b("React").jsx("li",{children:h._("No results found.")},0)});var c=this.props.invitees.map(function(c){var d=h._("Invite"),e;a.props.likedFriends.includes(Number(c.id))?e=b("React").jsx(b("XUIGrayText.react"),{shade:"light",weight:"bold",children:h._("Liked")}):a.state.recentlyInvitedIDs.includes(c.id)||a.props.invitedFriends.includes(Number(c.id))?e=b("React").jsx(b("XUIGrayText.react"),{shade:"light",weight:"bold",children:h._("Invite Sent")}):e=b("React").jsx(b("XUIButton.react"),{className:"_qfo",label:d,onClick:a.sendInvite.bind(a,c),use:a.props.style==="invite_blue"?"confirm":"default"});d="/ajax/hovercard/hovercard.php?id="+c.id;return b("React").jsx("li",{children:b("React").jsxs(b("ImageBlock.react"),{spacing:"medium",children:[b("React").jsx(b("Image.react"),{className:"_5kwi img",src:c.photo}),b("React").jsxs(b("FlexibleBlock.react"),{flex:"left",children:[b("React").jsx("div",{className:"_5kwj",children:b("React").jsx("div",{children:b("React").jsx(b("Link.react"),{href:c.profilelink,"data-hovercard":d,children:b("React").jsx("strong",{className:"ellipsis",children:c.name})})})}),b("React").jsx(b("InlineBlock.react"),{alignv:"middle",height:40,children:e})]})]})},c.id)}),d=this.props.loading?b("React").jsx(b("XUISpinner.react"),{className:"_5kwk",size:"large"}):null;return b("React").jsxs("ul",{className:"_5kwh",children:[c,d]})};d.sendInvite=function(a){var c=b("XPagesSendFriendInviteController").getURIBuilder().setInt("page_id",this.props.pageID).setInt("invitee",a.id).setString("ref",this.props.refLocation).setString("invite_callsite","PagesFriendInviterSuggestions").getURI();new(b("AsyncRequest"))(c).setMethod("POST").send();c=this.props.onInvite;c&&c({page_id:this.props.pageID,invitee:a.id});b("Arbiter").inform("friendInvitedInline",{id:a.id});this.state.recentlyInvitedIDs.push(a.id);this.forceUpdate()};return c}(b("React").Component);a.propTypes={pageID:(c=b("prop-types")).string.isRequired,invitees:c.array.isRequired,likedFriends:c.array.isRequired,invitedFriends:c.array.isRequired,refLocation:c.string.isRequired,loading:c.bool,onInvite:c.func,showNoResultsIndicator:c.bool,style:c.string};a.defaultProps={loading:!1,showNoResultsIndicator:!1};e.exports=a}),null);
__d("PagesFriendInviter",["cx","Arbiter","ArbiterMixin","AsyncRequest","CSS","DOM","Event","PagesEventObserver","PagesFriendInviterSuggestions.react","React","ReactComponentRenderer","ReactDOM","ScrollableArea.react","Style","URI","emptyFunction","mixin","throttle","tidyEvent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,b;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b=c.call.apply(c,[this].concat(e))||this,b.getScrollableArea=function(){return b.refs.scrollArea.getArea()},a)||babelHelpers.assertThisInitialized(b)}var d=a.prototype;d.render=function(){return b("React").jsx(b("ScrollableArea.react"),{width:this.props.width,onScroll:this.props.onScroll,shadow:!1,ref:"scrollArea",children:b("React").jsx(b("PagesFriendInviterSuggestions.react"),{pageID:this.props.pageID,invitees:this.props.invitees,loading:this.props.loading,likedFriends:this.props.likedFriends,invitedFriends:this.props.invitedFriends,refLocation:this.props.refLocation})})};return a}(b("React").Component);a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,d,e,f){__p&&__p();var g;g=a.call(this)||this;g.$PagesFriendInviter1=b;g.$PagesFriendInviter2=d;g.$PagesFriendInviter3=e;g.$PagesFriendInviter4=f||{};g.$PagesFriendInviter5=g.$PagesFriendInviter4.pageID;g.$PagesFriendInviter6=g.$PagesFriendInviter4.invitees||[];g.$PagesFriendInviter7=g.$PagesFriendInviter4.suggestionCount;g.$PagesFriendInviter8=g.$PagesFriendInviter4.likedFriends;c.alreadyInvitedFriends=g.$PagesFriendInviter4.invitedFriends;g.$PagesFriendInviter9=g.$PagesFriendInviter4.ref;g.$PagesFriendInviter10=g.$PagesFriendInviter4.loggingData;g.$PagesFriendInviter11=g.$PagesFriendInviter4.confirmStyle;g.init();g.initTypeaheadSubscriptions();return g}var d=c.prototype;d.init=function(){this.$PagesFriendInviter3!==null&&b("tidyEvent")(b("Event").listen(this.$PagesFriendInviter3,"click",this.initReactSuggestions.bind(this))),b("Arbiter").subscribe("friendInvitedInline",this.markAsInvited.bind(this))};d.initReactSuggestions=function(a){__p&&__p();var d=this;a.prevent();a=this.$PagesFriendInviter10;a.ref=this.$PagesFriendInviter9;b("PagesEventObserver").logData_DEPRECATED(a);this.$PagesFriendInviter1.getCore().reset();a=this.$PagesFriendInviter2.offsetWidth;var e=this.$PagesFriendInviter2.offsetHeight,f=this.$PagesFriendInviter3.parentNode.offsetHeight;b("DOM").remove(this.$PagesFriendInviter3);var g=b("DOM").create("div",{className:"_5tee"});b("Style").set(g,"height",f+"px");this.$PagesFriendInviter12=new(b("ReactComponentRenderer"))(i,g);this.$PagesFriendInviter12.setProps({width:a,pageID:this.$PagesFriendInviter5,invitees:this.$PagesFriendInviter6,likedFriends:this.$PagesFriendInviter8,invitedFriends:c.alreadyInvitedFriends,onScroll:b("throttle")(this.onScroll,100,this),refLocation:this.$PagesFriendInviter9,confirmStyle:this.$PagesFriendInviter11});b("DOM").replace(this.$PagesFriendInviter2,g);this.$PagesFriendInviter2=g;this.fetchMoreSuggestions(function(){d.$PagesFriendInviter12.component.getScrollableArea().setScrollTop(e)})};d.initTypeaheadSubscriptions=function(){__p&&__p();var a=this;if(this.$PagesFriendInviter1===null)return;this.$PagesFriendInviter1.subscribe("render",function(c,d){b("CSS").hide(a.$PagesFriendInviter2)});this.$PagesFriendInviter1.subscribe("reset",function(){b("CSS").show(a.$PagesFriendInviter2);if(a.$PagesFriendInviter12){var c=a.$PagesFriendInviter12.component.getScrollableArea();c.scrollToTop(!1);c.poke()}});this.$PagesFriendInviter1.getView().subscribe("invite",function(b,c){a.inform("invite",c)})};d.fetchMoreSuggestions=function(a){var c=this,d=50,e=new(h||(h=b("URI")))("/ajax/pages/invite/suggestions/");new(b("AsyncRequest"))(e).setMethod("GET").setReadOnly(!0).setData({pageID:this.$PagesFriendInviter4.pageID,offset:this.$PagesFriendInviter7,limit:d,ref:this.$PagesFriendInviter9}).setHandler(this.processResponse.bind(this)).setFinallyHandler(function(){c.$PagesFriendInviter13=!1,a&&a()}).send();this.$PagesFriendInviter7+=d;this.$PagesFriendInviter13=!0};d.processResponse=function(a){a=a.payload;a=a&&a.invitees;if(a&&a.length){var c;(c=this.$PagesFriendInviter6).push.apply(c,a);this.$PagesFriendInviter12.setProps({invitees:this.$PagesFriendInviter6})}else this.$PagesFriendInviter12.setProps({loading:!1,onScroll:b("emptyFunction")})};d.onScroll=function(){if(this.$PagesFriendInviter13)return;this.$PagesFriendInviter12.component.getScrollableArea().isScrolledToBottom()&&(this.$PagesFriendInviter12.setProps({loading:!0}),this.fetchMoreSuggestions())};d.markAsInvited=function(a,b){c.alreadyInvitedFriends.push(Number(b.id))};c.renderSuggestions=function(a,c,d,e,f,g,h){f=b("React").jsx(b("PagesFriendInviterSuggestions.react"),{invitedFriends:f,invitees:d,likedFriends:e,pageID:c,refLocation:g,style:h});b("ReactDOM").render(f,a)};return c}(b("mixin")(b("ArbiterMixin")));a.alreadyInvitedFriends=[];e.exports=a}),null);
__d("PagesFriendInviterTypeahead",["TypeaheadCore"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.initToggle=function(){this.view.subscribe("render",this.view.show.bind(this.view)),this.view.subscribe("reset",this.view.hide.bind(this.view)),this.subscribe("blur",this.reset.bind(this))};return b}(b("TypeaheadCore"));e.exports=a}),null);
__d("PagesFriendInviterTypeaheadView",["PagesFriendInviter","PagesFriendInviterSuggestions.react","React","ReactComponentRenderer","ScrollableArea.react","Style","TypeaheadView"],(function(a,b,c,d,e,f){__p&&__p();var g=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,b;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b=c.call.apply(c,[this].concat(e))||this,b.scrollToTop=function(){var a=b.refs.scrollArea.getArea();a.scrollToTop(!1);a.poke()},a)||babelHelpers.assertThisInitialized(b)}var d=a.prototype;d.render=function(){return b("React").jsx(b("ScrollableArea.react"),{width:this.props.width,shadow:!1,ref:"scrollArea",children:b("React").jsx(b("PagesFriendInviterSuggestions.react"),{pageID:this.props.pageID,invitees:this.props.invitees,likedFriends:this.props.likedFriends,invitedFriends:b("PagesFriendInviter").alreadyInvitedFriends,refLocation:this.props.refLocation})})};return a}(b("React").Component);a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(a,c){__p&&__p();var d=this;this.value=a;a={results:c,value:a};this.inform("beforeRender",a);c=a.results;this.results=c;a=c.map(function(a){return{id:a.uid,name:a.text,photo:a.photo}});!this.$PagesFriendInviterTypeaheadView1?(this.$PagesFriendInviterTypeaheadView1=new(b("ReactComponentRenderer"))(g,this.element),this.$PagesFriendInviterTypeaheadView1.setProps({width:this.element.parentNode.offsetWidth,pageID:this.pageID,likedFriends:this.likedFriends,invitedFriends:this.invitedFriends,invitees:a,onInvite:function(a){d.inform("invite",a)},refLocation:this.refLocation})):this.$PagesFriendInviterTypeaheadView1.setProps({invitees:a});a=this.element.parentNode.offsetHeight;b("Style").set(this.element,"height",a+"px");this.inform("render",c);this.$PagesFriendInviterTypeaheadView1.component.scrollToTop()};d.reset=function(a){a||(this.disableAutoSelect=!1);this.$PagesFriendInviterTypeaheadView1&&this.$PagesFriendInviterTypeaheadView1.setProps({invitees:[]});this.index=-1;this.results=[];this.value="";this.inform("reset");return this};d.highlight=function(){};d.mouseover=function(){};d.select=function(){};return c}(b("TypeaheadView"));e.exports=a}),null);