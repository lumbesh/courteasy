if (self.CavalryLogger) { CavalryLogger.start_js(["vL+kX"]); }

__d("AdsAPIAdAssetFeedCarouselFields",[],(function(a,b,c,d,e,f){e.exports={MULTI_SHARE_END_CARD:"multi_share_end_card",MULTI_SHARE_OPTIMIZED:"multi_share_optimized",CHILD_ATTACHMENTS:"child_attachments",ADLABELS:"adlabels"}}),null);
__d("PACExisingPostDataManager",["AdsGraphAPI","FBLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var c=a.prototype;c.convertPostToAssetFeedSpec=function(a,c,d){c=["asset_feed_spec_from_existing_post","object_story_id("+c+")","instagram_actor_id("+d+")"].join(".");return b("AdsGraphAPI").get(e.id).adaccount(a).get({fields:c}).then(function(a){return a.asset_feed_spec_from_existing_post},function(a){b("FBLogger")("ads").catching(a).mustfix("Fetching FB post to asset_feed_spec error");return a})};return a}();e.exports=new a()}),null);
__d("AdsAssetFeedSpecForPostProviderPlugin",["LoadObject","LoadObjectMap","PACExisingPostDataManager","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={initialState:function(a){return b("LoadObjectMap").createKeyed(function(c){c.forEach(function(c){b("promiseDone")(b("PACExisingPostDataManager").convertPostToAssetFeedSpec(c.accountID,c.objectStoryID,c.instagramActorID),function(d){a(function(a){return a.set(c,b("LoadObject").withValue(d))})},function(d){a(function(a){return a.set(c,b("LoadObject").withError(d))})}),a(function(a){return a.set(c,b("LoadObject").loading())})})},function(a){return[a.accountID,a.instagramActorID,a.objectStoryID].join(":")})}};e.exports=a}),null);
__d("AdsAssetFeedSpecForPostProvider",["Laminar","AdsAssetFeedSpecForPostProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsAssetFeedSpecForPostProviderPlugin"),"AdsAssetFeedSpecForPostProviderPlugin")}),null);
__d("AdsBusinessInstagramAccountProvider",["Laminar","AdsBusinessInstagramAccountProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsBusinessInstagramAccountProviderPlugin"),"AdsBusinessInstagramAccountProviderPlugin")}),null);
__d("AdsInstagramAccountBusinessBatchLoadErrorDataReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.setMultipleErrors(b.errors)}};e.exports=a}),null);
__d("AdsInstagramAccountBusinessBatchLoadErrorDataAction",["Laminar","AdsInstagramAccountBusinessBatchLoadErrorDataReducerPlugin","AdsBusinessInstagramAccountProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsInstagramAccountBusinessBatchLoadErrorDataReducerPlugin"),b("AdsBusinessInstagramAccountProvider"),{},"")]},function(){return[]},"AdsInstagramAccounts.BUSINESS.BATCH_LOAD_ERROR");e.exports=a}),null);
__d("AdsInstagramAccountBusinessBatchLoadedDataReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.setMultipleValueOrError(b.specs)}};e.exports=a}),null);
__d("AdsInstagramAccountBusinessBatchLoadedDataAction",["Laminar","AdsInstagramAccountBusinessBatchLoadedDataReducerPlugin","AdsBusinessInstagramAccountProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsInstagramAccountBusinessBatchLoadedDataReducerPlugin"),b("AdsBusinessInstagramAccountProvider"),{},"")]},function(){return[]},"AdsInstagramAccounts.BUSINESS.BATCH_LOADED");e.exports=a}),null);
__d("AdsBusinessInstagramAccountDataManager",["fbt","AdsBaseDataManager","AdsGraphAPI","AdsInstagramAccountBusinessBatchLoadedDataAction","AdsInstagramAccountBusinessBatchLoadErrorDataAction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=200;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.loadAll=function(a){var b=this;a.forEach(function(a){return b.load(a)})};d.load=function(a){b("promiseDone")(b("AdsGraphAPI").get(e.id).adaccount(a).edge("instagram_accounts").batched().get({fields:["has_profile_picture","id","id_v2","is_authorized_for_political_ads","is_business","is_private","is_published","profile_pic","username"],limit:h}),this.__handleSuccess.bind(this,["load"],a,null),this.__handleError.bind(this,["load"],a,null))};d.__onBatchLoaded=function(a){b("AdsInstagramAccountBusinessBatchLoadedDataAction").dispatch({specs:a},{line:"55",module:"AdsBusinessInstagramAccountDataManager.js"})};d.__onBatchLoadError=function(a){b("AdsInstagramAccountBusinessBatchLoadErrorDataAction").dispatch({errors:a},{line:"61",module:"AdsBusinessInstagramAccountDataManager.js"})};d.__getObjectTypeLabel=function(){return g._("Instagram Account")};return c}(b("AdsBaseDataManager"));e.exports=new a()}),null);
__d("AdsBusinessInstagramAccountProviderPlugin",["AdsBusinessInstagramAccountDataManager","LoadObjectMap"],(function(a,b,c,d,e,f){"use strict";a={initialState:function(a){return b("LoadObjectMap").create(function(c){a(function(a){return a.setLoading(c)}),b("AdsBusinessInstagramAccountDataManager").loadAll(Array.from(c))})}};e.exports=a}),null);
__d("AdsInstagramAccountBusinessBatchLoadedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.BUSINESS.BATCH_LOADED"}}),null);
__d("AdsInstagramAccountErrorRefreshAllErrorsDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.ERROR.REFRESH_ALL_ERRORS"}}),null);
__d("AdsInstagramAccountPageBatchLoadErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.BATCH_LOAD_ERROR");e.exports=a}),null);
__d("AdsInstagramAccountPageBatchLoadErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.BATCH_LOAD_ERROR"}}),null);
__d("AdsInstagramAccountPageBatchLoadedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.BATCH_LOADED");e.exports=a}),null);
__d("AdsInstagramAccountPageBatchLoadedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.BATCH_LOADED"}}),null);
__d("AdsInstagramAccountPageClearAccountsDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.CLEAR_ACCOUNTS"}}),null);
__d("AdsInstagramAccountPageCreateAndUsePageBackedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.CREATE_AND_USE_PAGE_BACKED"}}),null);
__d("AdsInstagramAccountPageCreatePageBackedErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.CREATE_PAGE_BACKED_ERROR");e.exports=a}),null);
__d("AdsInstagramAccountPageCreatePageBackedErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.CREATE_PAGE_BACKED_ERROR"}}),null);
__d("AdsInstagramAccountPageCreatePageBackedSuccessDataAction",["Laminar","ifRequired"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("ifRequired")("AdsAdgroupDraftFragmentsInstagramAccountPageCreatePageBackedSuccessReducerPlugin",function(a){return b("ifRequired")("AdsAdgroupDraftFragmentsDataProvider",function(c){return b("Laminar").__createReducer(a,c,{},"")})}),b("ifRequired")("AdsCFAdgroupInstagramAccountPageCreatePageBackedSuccessReducerPlugin",function(a){return b("ifRequired")("AdsCFAdgroupDataProvider",function(c){return b("Laminar").__createReducer(a,c,{},"")})})]},function(){return[]},"AdsInstagramAccounts.PAGE.CREATE_PAGE_BACKED_SUCCESS");e.exports=a}),null);
__d("AdsInstagramAccountPageCreatePageBackedSuccessDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.CREATE_PAGE_BACKED_SUCCESS"}}),null);
__d("AdsInstagramAccountPageHandleLinkAccountErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.HANDLE_LINK_ACCOUNT_ERROR");e.exports=a}),null);
__d("AdsInstagramAccountPageHandleLinkAccountErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.HANDLE_LINK_ACCOUNT_ERROR"}}),null);
__d("AdsInstagramAccountPageHandleLinkAccountResponseDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.HANDLE_LINK_ACCOUNT_RESPONSE");e.exports=a}),null);
__d("AdsInstagramAccountPageHandleLinkAccountResponseDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.HANDLE_LINK_ACCOUNT_RESPONSE"}}),null);
__d("AdsInstagramAccountPageHandleUnlinkAccountErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.HANDLE_UNLINK_ACCOUNT_ERROR");e.exports=a}),null);
__d("AdsInstagramAccountPageHandleUnlinkAccountErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.HANDLE_UNLINK_ACCOUNT_ERROR"}}),null);
__d("AdsInstagramAccountPageHandleUnlinkAccountResponseDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.HANDLE_UNLINK_ACCOUNT_RESPONSE");e.exports=a}),null);
__d("AdsInstagramAccountPageHandleUnlinkAccountResponseDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.HANDLE_UNLINK_ACCOUNT_RESPONSE"}}),null);
__d("AdsInstagramAccountPageLinkAccountDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.LINK_ACCOUNT"}}),null);
__d("AdsInstagramAccountPageUnlinkAccountDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.PAGE.UNLINK_ACCOUNT"}}),null);
__d("AdsInstagramAccountUsernameLoadErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.USERNAME.LOAD_ERROR");e.exports=a}),null);
__d("AdsInstagramAccountUsernameLoadErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.USERNAME.LOAD_ERROR"}}),null);
__d("AdsInstagramAccountUsernameLoadedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.USERNAME.LOADED");e.exports=a}),null);
__d("AdsInstagramAccountUsernameLoadedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsInstagramAccounts.USERNAME.LOADED"}}),null);
__d("AdsPagePostBatchLoadErrorDataReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.setMultipleErrors(b.errors)}};e.exports=a}),null);
__d("AdsPagePostBatchLoadErrorDataAction",["Laminar","AdsPagePostBatchLoadErrorDataReducerPlugin","AdsPagePostProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsPagePostBatchLoadErrorDataReducerPlugin"),b("AdsPagePostProvider"),{},"")]},function(){return[]},"PAGE_POST.BATCH_LOAD_ERROR");e.exports=a}),null);
__d("AdsPagePostBatchLoadedDataReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.setMultipleValueOrError(b.posts)}};e.exports=a}),null);
__d("AdsPagePostBatchLoadedDataAction",["Laminar","AdsPagePostBatchLoadedDataReducerPlugin","AdsPagePostProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsPagePostBatchLoadedDataReducerPlugin"),b("AdsPagePostProvider"),{},"")]},function(){return[]},"PAGE_POST.BATCH_LOADED");e.exports=a}),null);
__d("AdsPlacementCustomizationClearAssetFeedStoreOnPostChangeTriggerReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.clear()}};e.exports=a}),null);
__d("AdsPagePostProvider",["Laminar","AdsPagePostProviderPlugin","AdsPlacementCustomizationClearAssetFeedStoreOnPostChangeTriggerReducerPlugin","AdsAssetFeedSpecForPostProvider"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsPagePostProviderPlugin"),"AdsPagePostProviderPlugin",function(){return[b("Laminar").__createTriggerReducer(b("AdsPlacementCustomizationClearAssetFeedStoreOnPostChangeTriggerReducerPlugin"),"AdsPlacementCustomizationClearAssetFeedStoreOnPostChangeTriggerReducerPlugin",b("AdsAssetFeedSpecForPostProvider"))]})}),null);
__d("AdsPagePostDataManager",["fbt","AdsBaseDataManager","AdsGraphAPI","AdsPagePostBatchLoadedDataAction","AdsPagePostBatchLoadErrorDataAction","AdsPostFields","adsPagePostResponseShaper","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="U";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.loadAll=function(a){var b=this;a.forEach(function(a){return b.load(a)})};d.load=function(a){var c=this;b("promiseDone")(b("AdsGraphAPI").get(e.id).object("page_post",a).batched().get({date_format:h,fields:b("AdsPostFields"),execution_options:["validate_only"]}),function(d){d=b("adsPagePostResponseShaper")(d);return c.__handleSuccess(["load"],a,null,d)},this.__handleError.bind(this,["load"],a,null))};d.__onBatchLoaded=function(a,c){b("AdsPagePostBatchLoadedDataAction").dispatch({posts:a,versions:c},{line:"68",module:"AdsPagePostDataManager.js"})};d.__onBatchLoadError=function(a,c){var d=this,e=new Map();a.forEach(function(a,b){e.set(b,d.__getObjectError(b,a))});b("AdsPagePostBatchLoadErrorDataAction").dispatch({errors:e,versions:c},{line:"86",module:"AdsPagePostDataManager.js"})};d.__getObjectTypeLabel=function(){return g._("Page post")};return c}(b("AdsBaseDataManager"));c=new a();e.exports=c}),null);
__d("AdsPagePostProviderPlugin",["AdsPagePostDataManager","LoadObjectMap"],(function(a,b,c,d,e,f){"use strict";a={initialState:function(a){return b("LoadObjectMap").create(function(c){a(function(a){return a.setLoading(c)}),b("AdsPagePostDataManager").loadAll(Array.from(c))})}};e.exports=a}),null);
__d("AdsCPBUtils",["AdsAPICampaignPaths","AdsAPIObjectives","AdsAPITargetFields","AdsPlacementAPISpecReaderUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsPlacementAPISpecReaderUtils").isOnlyActivePublisherPlatform;function h(a,c){return a!==b("AdsAPIObjectives").VIDEO_VIEWS&&g((a={},a[b("AdsAPITargetFields").PUBLISHER_PLATFORMS]=c,a),"audience_network")}a={isCPBCampaign:function(a,c){c=a.objective;a=a.getIn(b("AdsAPICampaignPaths").TARGETING.PUBLISHER_PLATFORMS,b("immutable").List()).toJS();return h(c,a)},someAreCPBCampaigns:function(a){return a.some(function(a){var b=a.objective;if(!a.spec)return!1;a=a.spec.publisher_platforms;return a&&h(b,a)})}};e.exports=a}),null);
__d("adsInteractivePollHasFbFeedVideoPollSpec",["adsInteractivePollGetFbFeedVideoPollSpec"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("adsInteractivePollGetFbFeedVideoPollSpec")(a,c)!=null}e.exports=a}),null);
__d("AdsDynamicAdCustomizationConstants",["AdsAPIObjectives","CatalogVertical"],(function(a,b,c,d,e,f){"use strict";c={SUPPORTED_MULTI_LANGUAGE_CATALOG_VERTICALS:[(a=b("CatalogVertical")).COMMERCE,a.DESTINATIONS,a.FLIGHTS,a.HOME_LISTINGS,a.HOTELS,a.MEDIA_TITLES,a.VEHICLES],MAX_ADDITIONAL_LANGUAGES:48,CUSTOMIZATION_RULES_SPEC:"customization_rules_spec",SUPPORTED_MULTI_LANGUAGE_COLLECTION_OBJECTIVES:[b("AdsAPIObjectives").CONVERSIONS,b("AdsAPIObjectives").LINK_CLICKS,b("AdsAPIObjectives").PRODUCT_CATALOG_SALES]};e.exports=c}),null);
__d("AdsInstagramUsernameDataManager",["AdsBaseDataManager","AdsGraphAPI","AdsInstagramAccountUsernameLoadedDataAction","AdsInstagramAccountUsernameLoadErrorDataAction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.loadAll=function(a){var b=this;a.forEach(function(a){return b.load(a)})};d.load=function(a){var c=this;b("promiseDone")(b("AdsGraphAPI").get(e.id).object("instagram_object",a).batched().get({fields:["has_profile_picture","id","id_v2","is_authorized_for_political_ads","is_private","is_published","profile_pic","username"]}),function(b){return c.__handleSuccess(["load"],a,null,b)},function(b){return c.__handleError(["load"],a,null,b)})};d.__onBatchLoaded=function(a){b("AdsInstagramAccountUsernameLoadedDataAction").dispatch({specs:a},{line:"48",module:"AdsInstagramUsernameDataManager.js"})};d.__onBatchLoadError=function(a){b("AdsInstagramAccountUsernameLoadErrorDataAction").dispatch({errors:a},{line:"52",module:"AdsInstagramUsernameDataManager.js"})};return c}(b("AdsBaseDataManager"));e.exports=new a()}),null);
__d("XPageLinkInstagramAccountController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/page/instagram/link/",{})}),null);
__d("XPageUnlinkInstagramAccountController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/page/instagram/unlink/",{})}),null);
__d("AdsPageInstagramAccountDataManager",["fbt","AdsBaseDataManager","AdsGraphAPI","AdsInstagramAccountPageBatchLoadedDataAction","AdsInstagramAccountPageBatchLoadErrorDataAction","AdsInstagramAccountPageCreatePageBackedErrorDataAction","AdsInstagramAccountPageCreatePageBackedSuccessDataAction","AdsInstagramAccountPageHandleLinkAccountErrorDataAction","AdsInstagramAccountPageHandleLinkAccountResponseDataAction","AdsInstagramAccountPageHandleUnlinkAccountErrorDataAction","AdsInstagramAccountPageHandleUnlinkAccountResponseDataAction","AdsInterfacesLogEvents","AdsInterfacesLogger","AsyncRequest","XPageLinkInstagramAccountController","XPageUnlinkInstagramAccountController","promiseDone","sprintf"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=["has_profile_picture","id","id_v2","is_authorized_for_political_ads","is_business","is_private","is_published","profile_pic","username"].join(),i=["id","profile_picture_url","username"].join();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.loadAll=function(a){var b=this;a.forEach(function(a){return b.load(a)})};d.loadAllWithLogging=function(a,b){var c=this;a.forEach(function(a){return c.loadWithLogging(a,b)})};d.load=function(a){var c=this;b("promiseDone")(b("AdsGraphAPI").get(e.id).objectByName("page",a).batched().get({fields:[b("sprintf")("%s.limit(1).fields(%s)","instagram_accounts",h),b("sprintf")("%s.limit(1).fields(%s)","page_backed_instagram_accounts",h),b("sprintf")("instagram_business_account.fields(%s)",i)]}),function(b){return c.__handleSuccess(["load"],a,null,b)},function(b){return c.__handleError(["load"],a,null,b)})};d.loadWithLogging=function(a,c){b("AdsGraphAPI").get(e.id).objectByName("page",a).batched().get({fields:[b("sprintf")("%s.limit(1).fields(%s)","instagram_accounts",h),b("sprintf")("%s.limit(1).fields(%s)","page_backed_instagram_accounts",h),b("sprintf")("instagram_business_account.fields(%s)",i)]}).then(function(d){b("AdsInterfacesLogger").log({eventName:"get_page_from_instagram_accounts_success",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION,data:{page_id:a,source:c}},b("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)})["catch"](function(d){b("AdsInterfacesLogger").log({eventName:"get_page_from_instagram_accounts_failure",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION,data:{page_id:a,source:c}},b("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)})};d.createAndUsePageBackedAccount=function(a,c,d,f,g,h){b("promiseDone")(b("AdsGraphAPI").get(e.id).objectByName("page",d).edge("page_backed_instagram_accounts").batched().post({access_token:f}),function(e){b("AdsInstagramAccountPageCreatePageBackedSuccessDataAction").dispatch({hostID:h,source:g,data:{campaignID:a,adgroupIDs:c,pageID:d,instagramAccountID:e.id}},{line:"158",module:"AdsPageInstagramAccountDataManager.js"})},function(a){b("AdsInstagramAccountPageCreatePageBackedErrorDataAction").dispatch({data:{pageID:d}},{line:"170",module:"AdsPageInstagramAccountDataManager.js"}),b("AdsInterfacesLogger").log({eventName:"page_backed_instagram_account_creation_failure",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION,data:{page_id:d,source:g}},b("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)})};d.linkInstagramAccount=function(a,c,d){var e=b("XPageLinkInstagramAccountController").getURIBuilder().getURI();new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(e).setData({page_id:a,password:d,username:c}).setHandler(function(c){b("AdsInstagramAccountPageHandleLinkAccountResponseDataAction").dispatch({data:{pageID:a,instagramAccountID:c.payload.instagram_account_id,errorMessages:c.payload.error_messages,errorCode:c.payload.error_code}},{line:"203",module:"AdsPageInstagramAccountDataManager.js"})}).setErrorHandler(function(c){b("AdsInstagramAccountPageHandleLinkAccountErrorDataAction").dispatch({data:{pageID:a}},{line:"213",module:"AdsPageInstagramAccountDataManager.js"})}).send()};d.unlinkInstagramAccount=function(a,c){var d=b("XPageUnlinkInstagramAccountController").getURIBuilder().getURI();new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(d).setData({page_id:a,instagram_account_id:c}).setHandler(function(c){b("AdsInstagramAccountPageHandleUnlinkAccountResponseDataAction").dispatch({data:{pageID:a,error:c.payload.error,success:c.payload.success}},{line:"230",module:"AdsPageInstagramAccountDataManager.js"})}).setErrorHandler(function(c){b("AdsInstagramAccountPageHandleUnlinkAccountErrorDataAction").dispatch({data:{pageID:a}},{line:"239",module:"AdsPageInstagramAccountDataManager.js"})}).send()};d.__onBatchLoaded=function(a){b("AdsInstagramAccountPageBatchLoadedDataAction").dispatch({specs:a},{line:"249",module:"AdsPageInstagramAccountDataManager.js"})};d.__onBatchLoadError=function(a){b("AdsInstagramAccountPageBatchLoadErrorDataAction").dispatch({errors:a},{line:"255",module:"AdsPageInstagramAccountDataManager.js"})};d.__getObjectTypeLabel=function(){return g._("Page Instagram Accounts")};return c}(b("AdsBaseDataManager"));e.exports=new a()}),null);
__d("AdsInstagramUsernameStore",["AdsBaseDataStore_LEGACY","AdsInstagramAccountBusinessBatchLoadedDataActionFlux","AdsInstagramAccountErrorRefreshAllErrorsDataActionFlux","AdsInstagramAccountPageBatchLoadedDataActionFlux","AdsInstagramAccountUsernameLoadedDataActionFlux","AdsInstagramAccountUsernameLoadErrorDataActionFlux","AdsInstagramUsernameDataManager","AdsLoadState_LEGACY","getByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getDataManager=function(){return b("AdsInstagramUsernameDataManager")};d.__getActionTypes=function(){return[b("AdsInstagramAccountBusinessBatchLoadedDataActionFlux").actionType,b("AdsInstagramAccountErrorRefreshAllErrorsDataActionFlux").actionType,b("AdsInstagramAccountPageBatchLoadedDataActionFlux").actionType,b("AdsInstagramAccountUsernameLoadErrorDataActionFlux").actionType,b("AdsInstagramAccountUsernameLoadedDataActionFlux").actionType]};d.__onDispatch=function(a){__p&&__p();a=a.action;switch(a.type){case b("AdsInstagramAccountUsernameLoadedDataActionFlux").actionType:this.__handleData(a.specs,b("AdsLoadState_LEGACY").LOADED);break;case b("AdsInstagramAccountUsernameLoadErrorDataActionFlux").actionType:this.__handleData(a.errors,b("AdsLoadState_LEGACY").ERROR);break;case b("AdsInstagramAccountPageBatchLoadedDataActionFlux").actionType:this.$AdsInstagramUsernameStore1(a.specs);break;case b("AdsInstagramAccountBusinessBatchLoadedDataActionFlux").actionType:this.$AdsInstagramUsernameStore2(a.specs);break;case b("AdsInstagramAccountErrorRefreshAllErrorsDataActionFlux").actionType:this.__invalidateAllErrors()&&this.__emitChange();break}};d.$AdsInstagramUsernameStore1=function(a){if(!a||a.size===0)return;var c=new Map();a.forEach(function(a,d){d=b("getByPath")(a,["page_backed_instagram_accounts","data"],[]).concat(b("getByPath")(a,["instagram_accounts","data"],[]));d.forEach(function(a){return c.set(a.id,a)})});this.__handleData(c,b("AdsLoadState_LEGACY").LOADED)};d.$AdsInstagramUsernameStore2=function(a){if(!a||a.size===0)return;var c=new Map();a.forEach(function(a,d){d=b("getByPath")(a,["data"],[]);d.forEach(function(a){return c.set(a.id,a)})});this.__handleData(c,b("AdsLoadState_LEGACY").LOADED)};return c}(b("AdsBaseDataStore_LEGACY"));e.exports=new a()}),null);
__d("AdsPageInstagramAccountStore",["AdsBaseDataStore_LEGACY","AdsInstagramAccountErrorRefreshAllErrorsDataActionFlux","AdsInstagramAccountPageBatchLoadedDataActionFlux","AdsInstagramAccountPageBatchLoadErrorDataActionFlux","AdsInstagramAccountPageClearAccountsDataActionFlux","AdsInstagramAccountPageCreateAndUsePageBackedDataActionFlux","AdsInstagramAccountPageCreatePageBackedErrorDataActionFlux","AdsInstagramAccountPageCreatePageBackedSuccessDataActionFlux","AdsInstagramAccountPageHandleLinkAccountErrorDataActionFlux","AdsInstagramAccountPageHandleLinkAccountResponseDataActionFlux","AdsInstagramAccountPageHandleUnlinkAccountErrorDataActionFlux","AdsInstagramAccountPageHandleUnlinkAccountResponseDataActionFlux","AdsInstagramAccountPageLinkAccountDataActionFlux","AdsInstagramAccountPageUnlinkAccountDataActionFlux","AdsLoadState_LEGACY","AdsPageInstagramAccountDataManager","InstagramAuthenticationErrorMessages","adsCreateStoreThunkSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.getWithLoggingSelector=b("adsCreateStoreThunkSelector")(babelHelpers.assertThisInitialized(c),c.getWithLogging.bind(babelHelpers.assertThisInitialized(c)));c.$AdsPageInstagramAccountStore1={};c.$AdsPageInstagramAccountStore2={};c.$AdsPageInstagramAccountStore3={};return c}var d=c.prototype;d.getDataManager=function(){return b("AdsPageInstagramAccountDataManager")};d.__getActionTypes=function(){return[b("AdsInstagramAccountErrorRefreshAllErrorsDataActionFlux").actionType,b("AdsInstagramAccountPageBatchLoadErrorDataActionFlux").actionType,b("AdsInstagramAccountPageBatchLoadedDataActionFlux").actionType,b("AdsInstagramAccountPageClearAccountsDataActionFlux").actionType,b("AdsInstagramAccountPageCreateAndUsePageBackedDataActionFlux").actionType,b("AdsInstagramAccountPageCreatePageBackedErrorDataActionFlux").actionType,b("AdsInstagramAccountPageCreatePageBackedSuccessDataActionFlux").actionType,b("AdsInstagramAccountPageHandleLinkAccountErrorDataActionFlux").actionType,b("AdsInstagramAccountPageHandleLinkAccountResponseDataActionFlux").actionType,b("AdsInstagramAccountPageHandleUnlinkAccountErrorDataActionFlux").actionType,b("AdsInstagramAccountPageHandleUnlinkAccountResponseDataActionFlux").actionType,b("AdsInstagramAccountPageLinkAccountDataActionFlux").actionType,b("AdsInstagramAccountPageUnlinkAccountDataActionFlux").actionType]};d.getWithLogging=function(a,c){b("AdsPageInstagramAccountDataManager").loadWithLogging(a,c)};d.getAllWithLogging=function(a,c){b("AdsPageInstagramAccountDataManager").loadAllWithLogging(a,c)};d.__onDispatch=function(a){__p&&__p();a=a.action;switch(a.type){case b("AdsInstagramAccountPageBatchLoadedDataActionFlux").actionType:this.__handleData(a.specs,b("AdsLoadState_LEGACY").LOADED);break;case b("AdsInstagramAccountPageBatchLoadErrorDataActionFlux").actionType:this.__handleData(a.errors,b("AdsLoadState_LEGACY").ERROR);break;case b("AdsInstagramAccountPageClearAccountsDataActionFlux").actionType:this.__invalidate(a.data.pageID);break;case b("AdsInstagramAccountPageCreateAndUsePageBackedDataActionFlux").actionType:if(this.$AdsPageInstagramAccountStore1[a.data.pageID]===b("AdsLoadState_LEGACY").LOADING)return;this.$AdsPageInstagramAccountStore1[a.data.pageID]=b("AdsLoadState_LEGACY").LOADING;this.__emitChange();b("AdsPageInstagramAccountDataManager").createAndUsePageBackedAccount(a.data.campaignID,a.data.adgroupIDs,a.data.pageID,a.data.accessToken,a.source,a.hostID);break;case b("AdsInstagramAccountPageCreatePageBackedErrorDataActionFlux").actionType:this.$AdsPageInstagramAccountStore4(a.data.pageID);break;case b("AdsInstagramAccountPageCreatePageBackedSuccessDataActionFlux").actionType:this.$AdsPageInstagramAccountStore5(a.data);break;case b("AdsInstagramAccountErrorRefreshAllErrorsDataActionFlux").actionType:this.__invalidateAllErrors()&&this.__emitChange();break;case b("AdsInstagramAccountPageLinkAccountDataActionFlux").actionType:this.$AdsPageInstagramAccountStore6(a.data.pageID,a.data.username,a.data.password);break;case b("AdsInstagramAccountPageUnlinkAccountDataActionFlux").actionType:this.$AdsPageInstagramAccountStore7(a.data.pageID,a.data.instagramAccountID);break;case b("AdsInstagramAccountPageHandleLinkAccountErrorDataActionFlux").actionType:case b("AdsInstagramAccountPageHandleUnlinkAccountErrorDataActionFlux").actionType:this.$AdsPageInstagramAccountStore8(a.data.pageID);break;case b("AdsInstagramAccountPageHandleLinkAccountResponseDataActionFlux").actionType:this.$AdsPageInstagramAccountStore9(a.data.pageID,a.data.instagramAccountID,a.data.errorMessages,a.data.errorCode);break;case b("AdsInstagramAccountPageHandleUnlinkAccountResponseDataActionFlux").actionType:this.$AdsPageInstagramAccountStore10(a.data.pageID,a.data.error,a.data.success);break}};d.getPageBackedAccountCreateState=function(a){return this.$AdsPageInstagramAccountStore1[a]?this.$AdsPageInstagramAccountStore1[a]:b("AdsLoadState_LEGACY").LOADED};d.getPageLinkOrUnlinkAccountErrors=function(a){return this.$AdsPageInstagramAccountStore2[a]?this.$AdsPageInstagramAccountStore2[a]:[]};d.getPageLinkOrUnlinkState=function(a){return this.$AdsPageInstagramAccountStore3[a]?this.$AdsPageInstagramAccountStore3[a]:b("AdsLoadState_LEGACY").LOADED};d.$AdsPageInstagramAccountStore5=function(a){a.instagramAccountIDCallback&&a.instagramAccountIDCallback(a.instagramAccountID),this.$AdsPageInstagramAccountStore1[a.pageID]=b("AdsLoadState_LEGACY").LOADED,this.__invalidate(a.pageID)};d.$AdsPageInstagramAccountStore4=function(a){this.$AdsPageInstagramAccountStore1[a]=b("AdsLoadState_LEGACY").ERROR,this.__emitChange()};d.$AdsPageInstagramAccountStore6=function(a,c,d){this.$AdsPageInstagramAccountStore2[a]=[],this.$AdsPageInstagramAccountStore3[a]=b("AdsLoadState_LEGACY").LOADING,b("AdsPageInstagramAccountDataManager").linkInstagramAccount(a,c,d),this.__emitChange()};d.$AdsPageInstagramAccountStore7=function(a,c){this.$AdsPageInstagramAccountStore2[a]=[],this.$AdsPageInstagramAccountStore3[a]=b("AdsLoadState_LEGACY").LOADING,b("AdsPageInstagramAccountDataManager").unlinkInstagramAccount(a,c),this.__emitChange()};d.$AdsPageInstagramAccountStore9=function(a,c,d,e){__p&&__p();this.$AdsPageInstagramAccountStore3[a]=b("AdsLoadState_LEGACY").LOADED;if(!c){c=d||[];e&&c.push(b("InstagramAuthenticationErrorMessages").getMessage(e));c.length===0&&c.push(b("InstagramAuthenticationErrorMessages").getMessage());this.$AdsPageInstagramAccountStore2[a]=c;this.__emitChange();return}this.__invalidate(a);this.__emitChange()};d.$AdsPageInstagramAccountStore10=function(a,c,d){this.$AdsPageInstagramAccountStore3[a]=b("AdsLoadState_LEGACY").LOADED;if(c||!d){this.$AdsPageInstagramAccountStore2[a]=[b("InstagramAuthenticationErrorMessages").getMessage(c)];this.__emitChange();return}this.__invalidate(a);this.__emitChange()};d.$AdsPageInstagramAccountStore8=function(a){this.$AdsPageInstagramAccountStore3[a]=b("AdsLoadState_LEGACY").LOADED;var c=b("InstagramAuthenticationErrorMessages").getMessage();this.$AdsPageInstagramAccountStore2[a]=[c];this.__emitChange()};return c}(b("AdsBaseDataStore_LEGACY"));e.exports=new a()}),null);
__d("adsPlacementAssetCustomizableFields",["AdsAPIAdAssetFeedBodiesFields","AdsAPIAdAssetFeedFields","AdsAPIAdAssetFeedImagesFields","AdsAPIAdAssetFeedLinkURLsFields","AdsAPIAdAssetFeedTitlesFields","AdsAPIAdAssetFeedVideosFields","AdsAPIAdAssetTargetRuleFields","AdsAPIAdgroupPaths","AdsUnifiedCreativeAPIFields"],(function(a,b,c,d,e,f){"use strict";a=[{assetFeedField:(a=b("AdsAPIAdAssetFeedFields")).IMAGES,targetingRuleField:(c=b("AdsAPIAdAssetTargetRuleFields")).IMAGE_LABEL,assetPath:(d=b("AdsAPIAdgroupPaths")).CREATIVE.ASSET_FEED_SPEC.IMAGES,specField:(f=b("AdsUnifiedCreativeAPIFields")).imageHash,labelField:b("AdsAPIAdAssetFeedImagesFields").ADLABELS},{assetFeedField:a.VIDEOS,targetingRuleField:c.VIDEO_LABEL,assetPath:d.CREATIVE.ASSET_FEED_SPEC.VIDEOS,specField:f.videoID,labelField:b("AdsAPIAdAssetFeedVideosFields").ADLABELS},{assetFeedField:a.BODIES,targetingRuleField:c.BODY_LABEL,assetPath:d.CREATIVE.ASSET_FEED_SPEC.BODIES,specField:f.message,labelField:b("AdsAPIAdAssetFeedBodiesFields").ADLABELS},{assetFeedField:a.TITLES,targetingRuleField:c.TITLE_LABEL,assetPath:d.CREATIVE.ASSET_FEED_SPEC.TITLES,specField:f.headline,labelField:b("AdsAPIAdAssetFeedTitlesFields").ADLABELS},{assetFeedField:a.LINK_URLS,targetingRuleField:c.LINK_URL_LABEL,assetPath:d.CREATIVE.ASSET_FEED_SPEC.LINK_URLS,specField:f.linkURL,labelField:b("AdsAPIAdAssetFeedLinkURLsFields").ADLABELS}];e.exports=a}),null);
__d("adsPACgetExistingLabelForValue",["AdsAPIAdgroupPaths","AdsAssetFeedConstant","AdsPlacementAssetUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsAssetFeedConstant").ADLABELS,h=b("AdsPlacementAssetUtils").getFirstAdLabel;function i(a,c){return b("immutable").is(a["delete"](g),c["delete"](g))}function a(a,c,d){var e=b("immutable").fromJS(d);d=[].concat(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.path,[c]);c=a.getIn(d);a=c.find(function(a){return i(a,e)});return h(a)}e.exports=a}),null);
__d("adsPlacementAssetMutationAddCarouselCardDetail",["AdsAPIAdAssetFeedCarouselFields","AdsAPIAdgroupPaths","AdsAssetFeedFieldToRuleLabelMapping","AdsPlacementAssetUtils","adsPACgetExistingLabelForValue","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsPlacementAssetUtils").getFirstAdLabel;function h(a,c,d,e,f){__p&&__p();var g=b("AdsAssetFeedFieldToRuleLabelMapping").get(e);if(g==null)return a;var h=[].concat(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.path,[e]);c=[].concat(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.CAROUSELS,[c.toString(),b("AdsAPIAdAssetFeedCarouselFields").CHILD_ATTACHMENTS,d.toString(),g,"name"]);d=b("adsPACgetExistingLabelForValue")(a,e,f);if(d!=null)return a.setIn(c,d);g=b("AdsPlacementAssetUtils").makeUniqueLabelNameForPlacementAsset();var i=b("immutable").fromJS(babelHelpers["extends"]({},f,{adlabels:[{name:g}]}));return a.setIn(c,g).updateIn(h,function(a){return a.push(i)})}function a(a,b,c,d,e){__p&&__p();var f=a;a=(a=a.creative)==null?void 0:a.asset_feed_spec;var i=a==null?void 0:a.carousels;if(a==null||i==null)return f;a=i.findIndex(function(a){return g(a)===b});if(a==-1)return f;f=h(f,a,c,d,e);return f}e.exports=a}),null);
__d("adsPlacementAssetMutationSetInitialTargetingRule",["AdsAPIAdAssetTargetRuleFields","AdsAPIAdgroupPaths","immutable"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=b("immutable").Map();e=e!=null?e:b("immutable").Map();e=e.set(c,b("immutable").Map((c={},c.name=d,c)));e=e.set(b("AdsAPIAdAssetTargetRuleFields").CUSTOMIZATION_SPEC,f);return a.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES,b("immutable").List([e]))}e.exports=a}),null);
__d("adsPlacementAssetMutationAddCarouselFromObjectStorySpec",["AdsAPIAdAssetCustomizationRuleFields","AdsAPIAdAssetFeedFields","AdsAPIAdAssetFeedImagesFields","AdsAPIAdAssetFeedLinkURLsFields","AdsAPIAdAssetFeedVideosFields","AdsAPIAdAssetTargetRuleFields","AdsAPIAdgroupPaths","AdsAssetFeedConstant","AdsEditorMPAConstants","AdsPlacementAssetUtils","adsPlacementAssetMutationAddCarouselCardDetail","adsPlacementAssetMutationSetInitialTargetingRule","immutable","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsAssetFeedConstant").ADLABELS;function h(a){a=a;var c=b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC;a=[c.BODIES,c.CAROUSELS,c.DESCRIPTIONS,c.IMAGES,c.LINK_URLS,c.TITLES,c.VIDEOS].reduce(function(a,c){return a.updateIn(c,function(a){return(a=a)!=null?a:b("immutable").List()})},a);return a}function i(a,c,d,e){var f;f=(f=a.creative)==null?void 0:(f=f.asset_feed_spec)==null?void 0:f.carousels;if(f==null)return a;c={adlabels:[{name:c}],child_attachments:[],multi_share_end_card:d,multi_share_optimized:e};return a.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.CAROUSELS,f.push(b("immutable").fromJS(c)))}function j(a,c){__p&&__p();var d=a;a=(a=a.creative)==null?void 0:(a=a.asset_feed_spec)==null?void 0:a.link_urls;var e=b("immutable").Map();if(a!=null&&a.size===1){var f,h=b("AdsPlacementAssetUtils").makeUniqueLabelNameForPlacementAsset(),i=b("immutable").fromJS([{name:h}]);d=d.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.LINK_URLS,a.update(0,function(a){return a.set(g,i)}));e=b("immutable").fromJS((f={},f[b("AdsAPIAdAssetCustomizationRuleFields").LINK_URL_LABEL]={name:h},f))}else a!=null&&a.size>1&&b("recoverableViolation")("Carousel ad should not have more than 1 base URL","csol_pac");return b("adsPlacementAssetMutationSetInitialTargetingRule")(d,b("AdsAPIAdAssetTargetRuleFields").CAROUSEL_LABEL,c,e)}function a(a,c,d){__p&&__p();var e=a;a=(a=c.creative)==null?void 0:(c=a.object_story_spec)==null?void 0:c.link_data;c=a==null?void 0:a.child_attachments;if(a==null||c==null)return e;e=h(e);e=j(e,d);e=i(e,d,Boolean(a.multi_share_end_card),Boolean(a.multi_share_optimized));c.forEach(function(a,c){__p&&__p();var f;a=a.toJS();var g=a.link;e=b("adsPlacementAssetMutationAddCarouselCardDetail")(e,d,c,b("AdsAPIAdAssetFeedFields").LINK_URLS,(f={},f[b("AdsAPIAdAssetFeedLinkURLsFields").WEBSITE_URL]=(g=g)!=null?g:"",f));g=a.description;e=b("adsPlacementAssetMutationAddCarouselCardDetail")(e,d,c,b("AdsAPIAdAssetFeedFields").DESCRIPTIONS,{text:(f=g)!=null?f:""});g=a.name;e=b("adsPlacementAssetMutationAddCarouselCardDetail")(e,d,c,b("AdsAPIAdAssetFeedFields").TITLES,{text:(f=g)!=null?f:""});g=a.image_hash;f=a.image_crops;if(g!=null){var h;e=b("adsPlacementAssetMutationAddCarouselCardDetail")(e,d,c,b("AdsAPIAdAssetFeedFields").IMAGES,(h={},h[b("AdsAPIAdAssetFeedImagesFields").HASH]=g,h[b("AdsAPIAdAssetFeedImagesFields").IMAGE_CROPS]=(g=f)!=null?g:void 0,h))}f=a.video_id;g=a.picture;if(f!=null&&f!==b("AdsEditorMPAConstants").MPA_PLACEHOLDER_VIDEO_ID){e=b("adsPlacementAssetMutationAddCarouselCardDetail")(e,d,c,b("AdsAPIAdAssetFeedFields").VIDEOS,(h={},h[b("AdsAPIAdAssetFeedVideosFields").VIDEO_ID]=f,h[b("AdsAPIAdAssetFeedVideosFields").THUMBNAIL_URL]=(a=g)!=null?a:void 0,h))}});return e}e.exports=a}),null);
__d("NonURLLinkCTATypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GET_DIRECTIONS:"GET_DIRECTIONS",CALL:"CALL",MISSED_CALL:"MISSED_CALL",CALL_NOW:"CALL_NOW",CALL_ME:"CALL_ME",WHATSAPP_MESSAGE:"WHATSAPP_MESSAGE",MESSAGE_PAGE:"MESSAGE_PAGE",SAVE:"SAVE",GET_OFFER_VIEW:"GET_OFFER_VIEW",GET_OFFER:"GET_OFFER"})}),null);
__d("NonURLLinkCTATypesUtils",["AdsCallToActionTypesCond","NonURLLinkCTATypes","adsAccountGK"],(function(a,b,c,d,e,f){"use strict";a={isUnsupportedCTA:function(a,c){return b("AdsCallToActionTypesCond").TYPES.MESSAGE_PAGE.name==a?!b("adsAccountGK")._(c,"2TBav5yuh"):Object.prototype.hasOwnProperty.call(b("NonURLLinkCTATypes"),a)}};e.exports=a}),null);
__d("adsPlacementAssetMutationSetAdlabelForDefaultPlacement",["AdsAPIAdAssetFeedBodiesFields","AdsAPIAdAssetFeedTitlesFields","AdsAssetFeedMutationUtils","AdsPlacementAssetUtils","AdsUnifiedCreativeAPIFields","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();var g=b("AdsAssetFeedMutationUtils").removeUnsupportedAssetFields(a,c,b("AdsUnifiedCreativeAPIFields").linkDescription);a=a.getIn(e,null);var h={};if(a!=null&&a.size!==0){var i=a.get(0);f.forEach(function(a){var b=i.get(a);h[a]=b!=null?b.trim():""})}else f.forEach(function(a){h[a]=""});g=g.setIn(e,b("immutable").List.of(b("immutable").Map(h)));var j=b("AdsPlacementAssetUtils").makeUniqueLabelNameForPlacementAsset();g=b("AdsAssetFeedMutationUtils").setAssetAdLabelAtIndex(g,c,d,0,j);if(a!=null&&a.size>1)for(var k=1;k<a.size;k++){var l=a.get(k),m=f[0];l=l.get(m);m=l!=null?l.trim():"";l=e[e.length-1];switch(l){case"bodies":g=b("AdsAssetFeedMutationUtils").setAssetFieldAtIndex(g,c,b("AdsUnifiedCreativeAPIFields").message,k,b("AdsAPIAdAssetFeedBodiesFields").TEXT,m);break;case"titles":g=b("AdsAssetFeedMutationUtils").setAssetFieldAtIndex(g,c,b("AdsUnifiedCreativeAPIFields").headline,k,b("AdsAPIAdAssetFeedTitlesFields").TEXT,m);break;default:break}g=b("AdsAssetFeedMutationUtils").setAssetAdLabelAtIndex(g,c,d,k,j)}return{updatedAdgroup:g,newAdlabel:j}}e.exports=a}),null);
__d("adsPlacementAssetMutationSetAdlabelForAllCustomizations",["AdsAPIAdAssetFeedBodiesFields","AdsAPIAdAssetFeedLinkURLsFields","AdsAPIAdAssetFeedTitlesFields","AdsAPIAdAssetTargetRuleFields","AdsAPIAdgroupPaths","AdsBrandAwarenessUtils","AdsUnifiedCreativeAPIFields","adsPlacementAssetMutationSetAdlabelForDefaultPlacement","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=a,e=b("immutable").Map(),f=b("adsPlacementAssetMutationSetAdlabelForDefaultPlacement")(d,c,b("AdsUnifiedCreativeAPIFields").message,b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.BODIES,[b("AdsAPIAdAssetFeedBodiesFields").TEXT]);e=e.set(b("AdsAPIAdAssetTargetRuleFields").BODY_LABEL,f.newAdlabel);d=f.updatedAdgroup;f=b("adsPlacementAssetMutationSetAdlabelForDefaultPlacement")(f.updatedAdgroup,c,b("AdsUnifiedCreativeAPIFields").headline,b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.TITLES,[b("AdsAPIAdAssetFeedTitlesFields").TEXT]);e=e.set(b("AdsAPIAdAssetTargetRuleFields").TITLE_LABEL,f.newAdlabel);d=f.updatedAdgroup;if(b("AdsBrandAwarenessUtils").isWebsiteLinkEnabled(a)){f=[b("AdsAPIAdAssetFeedLinkURLsFields").WEBSITE_URL,b("AdsAPIAdAssetFeedLinkURLsFields").DISPLAY_URL];a=b("adsPlacementAssetMutationSetAdlabelForDefaultPlacement")(d,c,b("AdsUnifiedCreativeAPIFields").linkURL,b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.LINK_URLS,f);e=e.set(b("AdsAPIAdAssetTargetRuleFields").LINK_URL_LABEL,a.newAdlabel);d=a.updatedAdgroup}return{newAdlabels:e,updatedAdgroup:d}}e.exports=a}),null);
__d("adsPlacementAssetMutationConvertToAssetFeedWithCampaignTargeting",["AdsAdAssetSelectorTypes","AdsAPIAdAssetTargetRuleFields","AdsAPIAdgroupPaths","AdsAPIAdgroupRecordUtils","AdsAssetFeedFieldUtils","AdsAssetFeedMutationUtils","AdsCallToActionTypesCond","AdsPlacementAssetTargetingRuleUtils","AdsPlacementAssetUtils","AdsUEditorAdgroupAssetFeedMutators","AdsUnifiedCreativeAPIFields","ApiDynamicCreativeOptimizationTypes","NonURLLinkCTATypesUtils","adsPlacementAssetMutationAddCarouselFromObjectStorySpec","adsPlacementAssetMutationSetAdlabelForAllCustomizations","adsPlacementAssetMutationSetInitialTargetingRule","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsAdAssetSelectorTypes").AdsAssetSelectorFormat;function h(a,b){if(a===g.carousel)return"CAROUSEL";else if(b)return"AUTOMATIC_FORMAT";else if(a===g.image)return"SINGLE_IMAGE";else return"SINGLE_VIDEO"}function a(a,c,d,e,f,i,j){__p&&__p();i===void 0&&(i=!1);c=h(f,j);j=b("AdsUEditorAdgroupAssetFeedMutators").convertToAssetFeedSpec(b("AdsAPIAdgroupRecordUtils").getObjectType(a),a,d.pivots.objective,b("ApiDynamicCreativeOptimizationTypes").PLACEMENT).setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.AD_FORMATS,b("immutable").List.of(c)).setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.OPTIMIZATION_TYPE,b("ApiDynamicCreativeOptimizationTypes").PLACEMENT);c=b("AdsPlacementAssetUtils").makeUniqueLabelNameForPlacementAsset();f===g.carousel?j=b("adsPlacementAssetMutationAddCarouselFromObjectStorySpec")(j,a,c):f===g.image?j=b("AdsAssetFeedMutationUtils").setAssetAdLabelAtIndex(j,d,b("AdsUnifiedCreativeAPIFields").imageHash,0,c):j=b("AdsAssetFeedMutationUtils").setAssetAdLabelAtIndex(j,d,b("AdsUnifiedCreativeAPIFields").videoID,0,c);var k=b("immutable").Map();if(i&&f!==g.carousel){i=b("adsPlacementAssetMutationSetAdlabelForAllCustomizations")(j,d);i.newAdlabels.forEach(function(a,c){k=k.set(c,b("immutable").Map((c={},c.name=a,c)));return!0});j=i.updatedAdgroup}f!==g.carousel&&(j=b("adsPlacementAssetMutationSetInitialTargetingRule")(j,f===g.image?b("AdsAPIAdAssetTargetRuleFields").IMAGE_LABEL:b("AdsAPIAdAssetTargetRuleFields").VIDEO_LABEL,c,k));c=(i=a.creative)==null?void 0:(f=i.object_story_spec)==null?void 0:f.link_data;a=b("AdsAssetFeedFieldUtils").firstCTAAsset_TALK_WITH_ACE_BEFORE_USE(b("AdsUnifiedCreativeAPIFields").callToActionType.getValue(j,d));i=c!=null&&a==null||a!=null&&b("NonURLLinkCTATypesUtils").isUnsupportedCTA(a,e);if(i){f=d.getDefaultCallToActionType(j);b("NonURLLinkCTATypesUtils").isUnsupportedCTA(f,e)&&(f=b("AdsCallToActionTypesCond").TYPES.LEARN_MORE.name);j=b("AdsAssetFeedMutationUtils").setStringAssetsArrayInField(j,d,b("AdsUnifiedCreativeAPIFields").callToActionType,[f])}j=b("AdsPlacementAssetTargetingRuleUtils").filterOutPlacementsNotSupportedByPAC(j,(c=e==null?void 0:e.capabilities)!=null?c:[]);return j}e.exports=a}),null);
__d("adsPlacementAssetMutationConvertToImageAssetFeedWithCampaignTargeting",["adsPlacementAssetMutationConvertToAssetFeedWithCampaignTargeting"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){f===void 0&&(f=!1);g===void 0&&(g=!1);return b("adsPlacementAssetMutationConvertToAssetFeedWithCampaignTargeting")(a,c,d,e,"image",f,g)}e.exports=a}),null);
__d("isAdgroupAssetFeedRulesConsistentWithField",["AdsAPIAdAssetFeedTitlesFields","AdsAssetFeedUtils","AdsPlacementAssetCustomizationTypes","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsPlacementAssetCustomizationTypes").AdsPlacementCustomizationConsistency;function h(a,c){__p&&__p();a=(a=a.creative)==null?void 0:a.asset_feed_spec;if(a==null)return null;a=a[c];if(a==null)return null;a instanceof Array&&(a=b("immutable").fromJS(a));c=a.reduce(function(a,c){c=c.get(b("AdsAPIAdAssetFeedTitlesFields").ADLABELS)||[];c.every(function(b){b=b.get("name");b!=null&&a.push(b);return!0});return a},[]);return b("immutable").Set(c)}function i(a,c){a=(a=a.creative)==null?void 0:(a=a.asset_feed_spec)==null?void 0:a.asset_customization_rules;if(a==null)return null;a instanceof Array&&(a=b("immutable").fromJS(a));a=a.reduce(function(a,b){b=b.getIn([c,"name"]);b!=null&&a.push(b);return a},[]);return b("immutable").Set(a)}function j(a,b){if(a.equals(b))return{status:g.CONSISTENT};if(a.isSubset(b))return{status:g.UNUSED_LABEL_IN_ASSET_LIST,fieldTypeLabels:b.subtract(a)};return b.isSubset(a)?{status:g.UNKNOWN_LABEL_IN_TARGETING_RULE,targetRulesLabelsSet:a.subtract(b)}:{status:g.INCONSISTENT_LABEL_IN_ASSET_LIST_AND_TARGETING_RULE,targetRulesLabelsSet:a.subtract(b),fieldTypeLabels:b.subtract(a)}}function a(a,c,d){__p&&__p();if(!b("AdsAssetFeedUtils").hasPlacementCustomizationFromRecord(a))return{status:g.NOT_PAC_AD};c=h(a,c);a=i(a,d);if(a!=null&&c!=null)return j(a,c);else{if(a!=null&&(a==null?void 0:a.size)!==0)return{status:g.UNKNOWN_LABEL_IN_TARGETING_RULE,targetRulesLabelsSet:a};if(c!=null)return{status:g.UNUSED_LABEL_IN_ASSET_LIST,fieldTypeLabels:c}}return{status:g.NO_ASSET_LIST_AND_RULE_FOUND}}e.exports=a}),null);
__d("adsHasValidAdlabelsForPACAds",["AdsPlacementAssetCustomizationTypes","adsPlacementAssetCustomizableFields","isAdgroupAssetFeedRulesConsistentWithField"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsPlacementAssetCustomizationTypes").AdsPlacementCustomizationConsistency;function h(a,c,d){a=b("isAdgroupAssetFeedRulesConsistentWithField")(a,c,d);return a.status===g.UNKNOWN_LABEL_IN_TARGETING_RULE||a.status===g.INCONSISTENT_LABEL_IN_ASSET_LIST_AND_TARGETING_RULE}function a(a){return b("adsPlacementAssetCustomizableFields").map(function(b){var c=b.assetFeedField;b=b.targetingRuleField;return h(a,c,b)?c:null}).filter(Boolean)}e.exports=a}),null);
__d("AdsDCOImageCropDoFUtils",["AdsAPIAdAssetFeedImagesFields","AdsAssetFeedMutationUtils","AdsAssetFeedUtils","AdsUEditorAdgroupAssetFeedMutators","AdsUnifiedCreativeAPIFields","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=["FAM_TOGGLE_ON","FAM_TOGGLE_OFF","SMART_CROP_ELIGIBLE_ON","SMART_CROP_ELIGIBLE_OFF","SMART_CROP_INELIGIBLE_ON","SMART_CROP_INELIGIBLE_OFF"],h=new Set(["FACEBOOK_FEED","INSTAGRAM_STREAM"]);a={hasDoFSpecWithFAMToggleExpType:function(a){a=(a=a.creative)==null?void 0:(a=a.degrees_of_freedom_spec)==null?void 0:a.degrees_of_freedom_type;return g.includes(a)},isAdgroupOptInImageCropDof:function(a){if(!b("AdsAssetFeedUtils").isDofWithImageAdgroupFromRecord(a))return!1;a=(a=a.creative)==null?void 0:(a=a.asset_feed_spec)==null?void 0:a.images;return!!a&&a.count()>1},isDofImageCropEligibleAssetGroups:function(a){return a==null?!1:a.some(function(a){return h.has(a)})},replaceImageInOptInAdgroup:function(a,c,d,e,f){a=a;a=b("AdsAssetFeedMutationUtils").setImageAssetAtIndex(a,c,0,d,e);f&&(a=b("AdsAssetFeedMutationUtils").setImageCropAtIndex(a,c,0,f));a=b("AdsAssetFeedMutationUtils").removeAssetAtIndex(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,1);return b("AdsUEditorAdgroupAssetFeedMutators").sanitizeDofAdgroup(a)},setImagesEnrolled:function(a,c,d,e,f){a=a;for(var g=0;g<2;g++)a=b("AdsAssetFeedMutationUtils").setImageAssetAtIndex(a,c,g,d,e),a=b("AdsAssetFeedMutationUtils").removeAssetFieldAtIndex(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,g,b("AdsAPIAdAssetFeedImagesFields").IMAGE_CROPS);a=b("AdsAssetFeedMutationUtils").setImageCropAtIndex(a,c,1,f);return a},setAdgroupOptOutImageCropDoF:function(a,c){a=a;a=b("AdsAssetFeedMutationUtils").removeAssetAtIndex(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,1);return b("AdsUEditorAdgroupAssetFeedMutators").sanitizeDofAdgroup(a)}};e.exports=a}),null);
__d("AdsPACSpecMutationAsyncLog",["Promise","AdsInterfacesLogger","adsHasValidAdlabelsForPACAds","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("keyMirror")({CONVERT_PHASE1_TO_PHASE2:null,MULTI_CUSTOMIZATION_IMAGE:null,ADD_CUSTOMIZATION_IMAGE:null,SET_IMAGE_MASTER_VARIANT:null,STORIFY_REOPEN_PLACEMENT_EDITOR:null,OPEN_PLACEMENT_EDITOR:null,REMOVE_CUSTOMIZATION_IMAGE:null,VCK_TEMPLATE_SET_DATA:null,CHANGE_IMAGE_TO_VIDEO:null,ADD_CUSTOMIZATION_VIDEO:null,REMOVE_CUSTOMIZATION_VIDEO:null});b("keyMirror")({ADD_IMAGE_START:null,ADD_IMAGE_START_DOF:null,ADD_IMAGE_CONVERT_TO_PAC:null,ADD_IMAGE_END:null,ADD_MEDIA_START:null,ADD_MEDIA_START_DOF:null,ADD_MEDIA_CONVERT_TO_PAC:null,ADD_MEDIA_END:null,REMOVE_IMAGE_START:null,REMOVE_IMAGE_START_DOF:null,REMOVE_IMAGE_END:null,ADD_VIDEO_START:null,ADD_VIDEO_CONVERT_TO_PAC:null,ADD_VIDEO_END:null,REMOVE_VIDEO_START:null,REMOVE_VIDEO_END:null});a={log:function(a,c,d){var e=Date.now();return new(b("Promise"))(function(f){var g=b("adsHasValidAdlabelsForPACAds")(a),h=g.length===0;b("AdsInterfacesLogger").log({eventName:"LOG_PAC_SPEC_"+c,data:{adgroup_id:a.id,current_action_time:e,event_source:d,field_names:g,sub_event:h?"VALID_EVENT":"INVALID_EVENT"}});f()})}};e.exports=a}),null);
__d("AdsLocalizedPlacementsMutators",["invariant","AdsAPIAdAssetCustomizationRuleFields","AdsAPIAdAssetFeedBodiesFields","AdsAPIAdAssetFeedFields","AdsAPIAdAssetTargetRuleFields","AdsAPIAdgroupPaths","AdsAPITargetFields","AdsAssetFeedFieldToRuleLabelMapping","AdsAssetFeedMutationUtils","AdsAssetFeedUtils","AdsBrandAwarenessUtils","AdsDLOConstantUtils","AdsDLODefaultAssetConfig","AdsDLOFieldToAdlabelsMapping","AdsDLOLanguageUtils","AdsPlacementAssetTargetingRuleUtils","AdsPlacementAssetUtils","AdsPlacementConstants","AdsTargetingRuleUtils","AdsUnifiedCreativeAPIFields","ApiDynamicCreativeOptimizationTypes","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsPlacementConstants").PLACEMENT_FIELD_TO_AD_SET_PATHS,i={convertTargetRulePACAdgroupToACR:function(a){var c=a.getIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.TARGET_RULES);if(c==null)return a;c=c.map(function(a){var c=a.get(b("AdsAPIAdAssetTargetRuleFields").TARGETING);return a["delete"](b("AdsAPIAdAssetTargetRuleFields").TARGETING).set(b("AdsAPIAdAssetTargetRuleFields").CUSTOMIZATION_SPEC,c)});return a.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES,c).deleteIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.TARGET_RULES)},convertPACToLocalizedPlacementsAdgroup:function(a,c,d){__p&&__p();if(!b("AdsAssetFeedUtils").isPACAdgroupFromRecord(a))return a;var e=i._convertPACRulesToLocalizedPlacementRules(a);e=b("AdsAssetFeedUtils").setOptimizationType(e,b("ApiDynamicCreativeOptimizationTypes").LOCALIZED_PLACEMENTS);var f=c.objective,h=(a=e.creative)==null?void 0:a.asset_feed_spec,j=null;b("AdsDLOConstantUtils").isSupportedOptionalLinksObjective(f)&&(j=b("AdsBrandAwarenessUtils").isWebsiteLinkEnabled(e));b("AdsDLODefaultAssetConfig").forEach(function(a,c){if(!a.isUsedForObjective(f,j,d))return;h!=null&&h instanceof b("immutable").Record||g(0,13276);var i=h.get(c)||b("immutable").List();if(!i.isEmpty())return;h=h.set(c,i.push(b("immutable").Map([[a.pathToUpdate,a.getDefaultValue(e)]])))});return e.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.path,h)},_convertPACRulesToLocalizedPlacementRules:function(a){__p&&__p();var c,d,e,f;if(!b("AdsAssetFeedUtils").isPACAdgroupFromRecord(a))return a;c=(c=a.creative)==null?void 0:(c=c.asset_feed_spec)==null?void 0:c.bodies;d=(d=a.creative)==null?void 0:(d=d.asset_feed_spec)==null?void 0:d.titles;e=(e=a.creative)==null?void 0:(e=e.asset_feed_spec)==null?void 0:e.descriptions;f=(f=a.creative)==null?void 0:(f=f.asset_feed_spec)==null?void 0:f.link_urls;var g=a;c!=null&&c.size===1&&(g=g.deleteIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.BODIES.concat("0",b("AdsAPIAdAssetFeedBodiesFields").ADLABELS)));d!=null&&d.size===1&&(g=g.deleteIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.TITLES.concat("0",b("AdsAPIAdAssetFeedBodiesFields").ADLABELS)));e!=null&&e.size===1&&(g=g.deleteIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.DESCRIPTIONS.concat("0",b("AdsAPIAdAssetFeedBodiesFields").ADLABELS)));f!=null&&f.size===1&&(g=g.deleteIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.LINK_URLS.concat("0",b("AdsAPIAdAssetFeedBodiesFields").ADLABELS)));c=a.getIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES);var i=b("AdsPlacementAssetTargetingRuleUtils").getDefaultRuleOrRuleWithMostPlacements(c),j=h.keySeq();d=c.map(function(a){if(!b("immutable").is(a,i))return a;var c=a.get(b("AdsAPIAdAssetCustomizationRuleFields").CUSTOMIZATION_SPEC),d=c instanceof b("immutable").Map?c:b("immutable").Map();j.forEach(function(a){d=d["delete"](a)});return a["delete"](b("AdsAPIAdAssetCustomizationRuleFields").BODY_LABEL)["delete"](b("AdsAPIAdAssetCustomizationRuleFields").TITLE_LABEL)["delete"](b("AdsAPIAdAssetCustomizationRuleFields").DESCRIPTION_LABEL).set(b("AdsAPIAdAssetCustomizationRuleFields").CUSTOMIZATION_SPEC,d).set(b("AdsAPIAdAssetCustomizationRuleFields").IS_DEFAULT,!0)});return g.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES,d)},convertDLOToLocalizedPlacementsAdgroup:function(a,c){__p&&__p();if(!b("AdsAssetFeedUtils").isDLOAdgroupFromRecord(a))return a;var d=b("AdsAssetFeedUtils").getMediaTypeFromFormat(a);if(d==null)return a;if(b("AdsAssetFeedUtils").getDistinctMediaAssetCount(a,d)!==1)return a;var e=b("AdsPlacementAssetUtils").makeUniqueLabelNameForPlacementAsset();a=b("AdsAssetFeedUtils").setOptimizationType(a,b("ApiDynamicCreativeOptimizationTypes").LOCALIZED_PLACEMENTS);a=i._setFirstMediaAssetLabel(a,c,d,e);return i._setMediaLabelInRule(a,d,e)},_setFirstMediaAssetLabel:function(a,c,d,e){if(d===b("AdsAPIAdAssetFeedFields").IMAGES)return b("AdsAssetFeedMutationUtils").setAssetAdLabelAtIndex(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,0,e);else if(d===b("AdsAPIAdAssetFeedFields").VIDEOS)return b("AdsAssetFeedMutationUtils").setAssetAdLabelAtIndex(a,c,b("AdsUnifiedCreativeAPIFields").videoID,0,e);return a},_setMediaLabelInRule:function(a,c,d){__p&&__p();var e;e=(e=a.creative)==null?void 0:(e=e.asset_feed_spec)==null?void 0:e.asset_customization_rules;if(e==null)return a;var f=b("AdsAssetFeedFieldToRuleLabelMapping").get(c);if(f==null)return a;c=e.map(function(a){var c=a.get(f);if(c==null||!(c instanceof b("immutable").Map))return a;c=c.set("name",d);return a.set(f,c)});return a.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES,c)},addPlacementsToAssetCustomizationRules:function(a,c,d,e){__p&&__p();var f;if(!b("AdsAssetFeedUtils").isLocalizedPlacementsAdgroupFromRecord(a))return a;f=(f=a.creative)==null?void 0:(f=f.asset_feed_spec)==null?void 0:f.asset_customization_rules;if(f==null)return a;var g=f.find(function(a){return a.get(b("AdsAPIAdAssetCustomizationRuleFields").IS_DEFAULT)===!0});g=i._getMediaLabelFromAssetCustomizationRule(g,c);f=i._addNewPlacementRulesToAssetCustomizationRules(f,g,d,c,e);return a.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES,f)},_getMediaLabelFromAssetCustomizationRule:function(a,b){a=a.getIn([b,"name"]);if(a==null)return null;typeof a==="string"||g(0,14664);return a},_convertPlacementListToCustomizationSpec:function(a){a=a.reduce(function(a,c){b("AdsTargetingRuleUtils").assertValidPositionForPlatform(c.position,c.platform);return a.update("publisher_platforms",function(a){return(a||b("immutable").Set()).add(c.platform)}).update(b("AdsTargetingRuleUtils").PLATFORMS_TO_TARGETING_POSITION_FIELDS[c.platform],function(a){return(a||b("immutable").Set()).add(c.position)})},b("immutable").Map());return a.map(function(a){return a.toList()})},_addNewPlacementRulesToAssetCustomizationRules:function(a,c,d,e,f){var g=b("immutable").Map().set("name",d);d=a.filter(function(a){return i._getMediaLabelFromAssetCustomizationRule(a,e)===c});d=d.map(function(a){var c=a.getIn([b("AdsAPIAdAssetCustomizationRuleFields").CUSTOMIZATION_SPEC,b("AdsAPITargetFields").LOCALES]);c=i._convertPlacementListToCustomizationSpec(f).set(b("AdsAPITargetFields").LOCALES,c);return a["delete"](b("AdsAPIAdAssetCustomizationRuleFields").IS_DEFAULT).set(e,g).set(b("AdsAPIAdAssetCustomizationRuleFields").CUSTOMIZATION_SPEC,c)});return a.concat(d)},removeAllMediaInLocalizedPlacementsAdgroup:function(a){__p&&__p();var c;if(!b("AdsAssetFeedUtils").isLocalizedPlacementsAdgroupFromRecord(a))return a;c=(c=a.creative)==null?void 0:c.asset_feed_spec;if(c==null)return a;var d=c.asset_customization_rules;if(d==null)return a;c=c;c.images!=null&&(c=c.set(b("AdsAPIAdAssetFeedFields").IMAGES,b("immutable").List()));c.videos!=null&&(c=c.set(b("AdsAPIAdAssetFeedFields").VIDEOS,b("immutable").List()));d=d.map(function(a){return a["delete"](b("AdsAPIAdAssetTargetRuleFields").IMAGE_LABEL)["delete"](b("AdsAPIAdAssetTargetRuleFields").VIDEO_LABEL)});return a.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.path,c.set(b("AdsAPIAdAssetFeedFields").ASSET_CUSTOMIZATION_RULES,d))},convertLocalizedPlacementsToPAC:function(a){__p&&__p();if(!b("AdsAssetFeedUtils").isLocalizedPlacementsAdgroupFromRecord(a))return a;var c=b("AdsDLOLanguageUtils").getAddedLanguagesCountFromAdgroup(a);if(c>0)return a;c=(c=a.creative)==null?void 0:c.asset_feed_spec;var d=c==null?void 0:c.asset_customization_rules;if(c==null||d==null)return a;var e=d.size;e=b("immutable").List(Array.from({length:e},function(){return b("AdsPlacementAssetUtils").makeUniqueLabelNameForPlacementAsset()}));var f=b("AdsDLOLanguageUtils").getPrimaryLanguageFromAdgroup(a);d=i.convertLocalizedPlacementsRulesWithOneLanguageToPACRules(d,e);c=i.convertLocalizedPlacementsAssetFeedSpecToPACAssetFeedSpec(c,f,e);f=a.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.path,c.set(b("AdsAPIAdAssetFeedFields").ASSET_CUSTOMIZATION_RULES,d));return b("AdsAssetFeedUtils").setOptimizationType(f,b("ApiDynamicCreativeOptimizationTypes").PLACEMENT)},convertLocalizedPlacementsRulesWithOneLanguageToPACRules:function(a,c){__p&&__p();return a.map(function(a,d){__p&&__p();var e,f=a["delete"](b("AdsAPIAdAssetCustomizationRuleFields").IS_DEFAULT);a=a.get(b("AdsAPIAdAssetCustomizationRuleFields").CUSTOMIZATION_SPEC);a!=null&&a instanceof b("immutable").Map||g(0,14442);a=a["delete"](b("AdsAPITargetFields").LOCALES);b("AdsAssetFeedFieldToRuleLabelMapping").forEach(function(a,c){switch(a){case b("AdsAPIAdAssetCustomizationRuleFields").IMAGE_LABEL:case b("AdsAPIAdAssetCustomizationRuleFields").VIDEO_LABEL:return;default:f=f["delete"](a);return}});return f.merge((e={},e[b("AdsAPIAdAssetCustomizationRuleFields").CUSTOMIZATION_SPEC]=a,e[b("AdsAPIAdAssetCustomizationRuleFields").BODY_LABEL]=b("immutable").Map((a={},a.name=c.get(d),a)),e[b("AdsAPIAdAssetCustomizationRuleFields").TITLE_LABEL]=b("immutable").Map((a={},a.name=c.get(d),a)),e[b("AdsAPIAdAssetCustomizationRuleFields").LINK_URL_LABEL]=b("immutable").Map((a={},a.name=c.get(d),a)),e))})},convertLocalizedPlacementsAssetFeedSpecToPACAssetFeedSpec:function(a,c,d){__p&&__p();var e=d.map(function(a){return b("immutable").Map().set("name",a)}),f=a;b("AdsDLOFieldToAdlabelsMapping").forEach(function(d,g){__p&&__p();if(g===b("AdsAPIAdAssetFeedFields").IMAGES||g===b("AdsAPIAdAssetFeedFields").VIDEOS)return;var h=a.get(g);if(h==null)return;h=h.map(function(a,f){__p&&__p();var h;switch(g){case b("AdsAPIAdAssetFeedFields").BODIES:case b("AdsAPIAdAssetFeedFields").TITLES:case b("AdsAPIAdAssetFeedFields").LINK_URLS:h=e;break;default:h=a.get(d)}if(h==null)return a;f=h.filter(function(a){return a.get("name")!==c});return f.isEmpty()?a["delete"](d):a.set(d,f)});f=f.set(g,h.isEmpty()?void 0:h)});return f}};e.exports=i}),null);
__d("AdsUEditorAdgroupImageMutators",["AdsAPIAdAssetFeedFields","AdsAPIAdAssetFeedImagesFields","AdsAPIAdAssetTargetRuleFields","AdsAPIAdgroupPaths","AdsAPIAdgroupRecordUtils","AdsAPIChildAttachmentPaths","AdsAssetFeedFieldUtils","AdsAssetFeedMutationUtils","AdsAssetFeedUtils","AdsChildAttachmentsUtils","AdsDCOImageCropDoFUtils","AdsDLOAdgroupFieldUtils","AdsDLOLanguageUtils","AdsImageUtils","AdsLocalizedPlacementsMutators","AdsMessengerReducerUtils","AdsObjectStorySpecUtils","AdsObjectTypeUtils","AdsPACSpecMutationAsyncLog","AdsPlacementAssetTargetingRuleUtils","AdsPlacementAssetUtils","AdsUnifiedCreativeAPIFields","adsPlacementAssetMutationConvertToImageAssetFeedWithCampaignTargeting","immutable","isFalsey","isTruthy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f){__p&&__p();if(b("isFalsey")(e))return c;var g=a.capabilities;g=b("AdsMessengerReducerUtils").isMessengerVisualEditorV2Enabled(g);if(!g)return c;g=b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage.getValue(c,d);if(!b("AdsMessengerReducerUtils").shouldSetDefaultWelcomeMessage(g))return c;var h=b("AdsAPIAdgroupRecordUtils").getAppDestinationType(c,d);if(h!=="MESSENGER")return c;h=f?f.name:null;a=a.account_id;var i=b("AdsMessengerReducerUtils").getWelcomeMessageDefaultMediaFormat(),j=b("AdsUnifiedCreativeAPIFields").pageID.getValue(c,d);f=b("AdsMessengerReducerUtils").getDefaultQuickReplies(f);a=b("AdsMessengerReducerUtils").setDefaultWelcomeMessage(a,c,i,f,e,j,h,g,null,!0);i=b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage.getPath(c,d);return i?c.setIn(i,a):c}function a(a,c,d,e,f,i,k,l,m,n,o){__p&&__p();var p=c!=null?void 0:d;n=g(a,l,m,c,n);if(b("isTruthy")(e)&&b("isFalsey")(c)&&b("isFalsey")(p))n=n.deleteIn(b("AdsAPIAdgroupPaths").CREATIVE.PLATFORM_CUSTOMIZATIONS.path);else if(b("isTruthy")(e))n=n.setIn([].concat(b("AdsAPIAdgroupPaths").CREATIVE.PLATFORM_CUSTOMIZATIONS.path,e,"image_hash"),c),n=n.setIn([].concat(b("AdsAPIAdgroupPaths").CREATIVE.PLATFORM_CUSTOMIZATIONS.path,e,"image_url"),p);else if(b("AdsAssetFeedUtils").isAdgroupUsingNonTextOnlyDofAssetFeedSpec(n)){if(b("AdsAssetFeedUtils").isDLOAdgroupFromRecord(n)&&b("AdsAssetFeedUtils").getAssetMediaAdlabelCount(n)<=0){var q=b("AdsDLOLanguageUtils").getPrimaryLanguageFromAdgroup(n);if(q!=null)return b("AdsDLOAdgroupFieldUtils").setImage(a,n,q,c,c==null?d:null)}if(b("AdsDCOImageCropDoFUtils").isAdgroupOptInImageCropDof(n))return b("AdsDCOImageCropDoFUtils").replaceImageInOptInAdgroup(l,m,c,c==null?d:null,o);a=b("AdsAssetFeedFieldUtils").getDefaultAssetIndex(n,b("AdsAPIAdAssetFeedFields").IMAGES);n=b("AdsAssetFeedMutationUtils").setImageAssetAtIndex(n,m,a,c,p);o!=null&&(n=b("AdsAssetFeedMutationUtils").setImageCropAtIndex(n,m,a,o));return n}else{q=b("AdsUnifiedCreativeAPIFields").imageHash.getPath(n,m);q&&(n=n.setIn(q,c));((l=n.creative)==null?void 0:l.image_hash)&&(n=n.setIn(b("AdsAPIAdgroupPaths").CREATIVE.IMAGE_HASH,c));d=b("AdsUnifiedCreativeAPIFields").imageURL.getPath(n,m);a=b("AdsUnifiedCreativeAPIFields").videoThumbnailURL.getPath(n,m);a?n=n.setIn(a,f):d&&(n=n.setIn(d,p));((q=n.creative)==null?void 0:q.image_url)&&(n=n.setIn(b("AdsAPIAdgroupPaths").CREATIVE.IMAGE_URL,p));n=j(f,i,k,n)}n=h(o,e,n,m);return n}function h(a,c,d,e){__p&&__p();var f;f=(f=d.creative)==null?void 0:f.object_type;if(f==null||!b("AdsImageUtils").canCropStaticImageForPlatform(f,c))return d;if(b("isTruthy")(c))return i(a,c,d);f=b("AdsUnifiedCreativeAPIFields").imageCrops.getPath(d,e);if(!f)return d;return!a||Object.keys(a).length===0?d.deleteIn(f):d.setIn(f,a)}function i(a,c,d){return!a||Object.keys(a).length===0?d.deleteIn([].concat(b("AdsAPIAdgroupPaths").CREATIVE.PLATFORM_CUSTOMIZATIONS.path,[c,"image_crops"])):d.setIn([].concat(b("AdsAPIAdgroupPaths").CREATIVE.PLATFORM_CUSTOMIZATIONS.path,[c,"image_crops"]),a)}function j(a,c,d,e){e=e.setIn(b("AdsAPIAdgroupPaths").CREATIVE.THUMBNAIL_URL,a);e=e.setIn(b("AdsAPIAdgroupPaths").CREATIVE.THUMBNAIL_HEIGHT,c);e=e.setIn(b("AdsAPIAdgroupPaths").CREATIVE.THUMBNAIL_WIDTH,d);return e}function c(a){__p&&__p();var c=b("AdsObjectTypeUtils").getCreativeSpecType(a);c=b("AdsObjectStorySpecUtils").getPaths(c);var d=c.image_url;c=c.image_hash;if(!d||!c)return a;var e=a.getIn(d);c=a.getIn(c);e=e&&c?a.deleteIn(d):a;c=b("AdsChildAttachmentsUtils").getChildAttachmentsPath(e);if(!c)return e;d=e.getIn(c);if(!d)return e;d=d.map(function(a){var c=a.getIn(b("AdsAPIChildAttachmentPaths").IMAGE_HASH),d=a.getIn(b("AdsAPIChildAttachmentPaths").PICTURE);return c&&d?a.deleteIn(b("AdsAPIChildAttachmentPaths").PICTURE):a});return e.setIn(c,d)}function d(a){__p&&__p();var c=a.adgroup,d=a.campaign,e=a.specPlugin,f=a.adAccount,g=a.assetGroup,h=a.validAssetGroupsByAsset,i=a.imageHash,j=a.imageURL,n=a.backgroundColor,o=a.crops,p=a.placementList,q=a.isUsingPlacementEditor;q=q===void 0?!1:q;a=a.sourceReducer;var r=c,s=b("AdsAssetFeedUtils").isDLOAdgroupFromRecord(c),t=!s;t&&b("AdsPACSpecMutationAsyncLog").log(c,"ADD_IMAGE_START",a);s?r=b("AdsLocalizedPlacementsMutators").convertDLOToLocalizedPlacementsAdgroup(c,e):b("AdsAssetFeedUtils").hasPlacementCustomizationFromRecord(c)||(r=b("adsPlacementAssetMutationConvertToImageAssetFeedWithCampaignTargeting")(c,d,e,f,q));t&&b("AdsPACSpecMutationAsyncLog").log(r,"ADD_IMAGE_CONVERT_TO_PAC",a);s=h&&g?b("AdsPlacementAssetUtils").getAssetLabelIfSingleValidAssetGroup(g,h):null;if(b("isTruthy")(s)){q=b("AdsAssetFeedFieldUtils").getAssetEntryForLabel((d=r.creative)==null?void 0:(f=d.asset_feed_spec)==null?void 0:f.images,b("AdsAPIAdAssetFeedImagesFields").ADLABELS,s,b("AdsAPIAdAssetFeedImagesFields").HASH).index;b("isFalsey")(q)&&(q=0);g=m(c,e,q,s);h=g.adgroupWithIsolatedImageAsset;d=g.isolatedImageAssetIndex;r=h;q=d;s=b("AdsAssetFeedFieldUtils").getAssetAtIndex((f=r.creative)==null?void 0:(c=f.asset_feed_spec)==null?void 0:c.images,b("AdsAPIAdAssetFeedImagesFields").HASH,q);s!==i&&(r=b("AdsAssetFeedMutationUtils").removeAssetFieldAtIndex(r,e,b("AdsUnifiedCreativeAPIFields").imageHash,q,b("AdsAPIAdAssetFeedImagesFields").IMAGE_CROPS),r=b("AdsAssetFeedMutationUtils").removeAssetFieldAtIndex(r,e,b("AdsUnifiedCreativeAPIFields").imageHash,q,b("AdsAPIAdAssetFeedImagesFields").PORTRAIT_CUSTOMIZATIONS));r=k(r,e,q,s!==i,i,j,n,o);r=l(r,e);t&&b("AdsPACSpecMutationAsyncLog").log(r,"ADD_IMAGE_END",a);return r}d=(g=r.creative)==null?void 0:(h=g.asset_feed_spec)==null?void 0:h.images;f=d!=null?d.size:0;c=b("AdsPlacementAssetUtils").makeUniqueLabelNameForPlacementAsset();r=k(r,e,f,!0,i,j,n,o);r=b("AdsAssetFeedMutationUtils").setAssetAdLabelAtIndex(r,e,b("AdsUnifiedCreativeAPIFields").imageHash,f,c);if(b("AdsAssetFeedUtils").isLocalizedPlacementsAdgroupFromRecord(r)){r=b("AdsLocalizedPlacementsMutators").addPlacementsToAssetCustomizationRules(r,b("AdsAPIAdAssetTargetRuleFields").IMAGE_LABEL,c,p);r=l(r,e);t&&b("AdsPACSpecMutationAsyncLog").log(r,"ADD_IMAGE_END",a);return r}q=r.getIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES,function(a){return u});s=b("AdsPlacementAssetTargetingRuleUtils").movePlacementsInTargetingRules(q||b("immutable").List(),b("AdsAPIAdAssetTargetRuleFields").IMAGE_LABEL,c,p);g=s.labelsRemoved;var u=s.updatedTargetingRules;r=r.setIn(b("AdsAPIAdgroupPaths").CREATIVE.ASSET_FEED_SPEC.ASSET_CUSTOMIZATION_RULES,u);for(var h=g,d=Array.isArray(h),i=0,h=d?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(i>=h.length)break;j=h[i++]}else{i=h.next();if(i.done)break;j=i.value}n=j;q=b("AdsAssetFeedFieldUtils").getAssetEntryForLabel((o=r.creative)==null?void 0:(f=o.asset_feed_spec)==null?void 0:f.images,b("AdsAPIAdAssetFeedImagesFields").ADLABELS,n,b("AdsAPIAdAssetFeedImagesFields").HASH).index;r=q!=null?b("AdsAssetFeedMutationUtils").removeAssetAtIndex(r,e,b("AdsUnifiedCreativeAPIFields").imageHash,q):r}r=l(r,e);t&&b("AdsPACSpecMutationAsyncLog").log(r,"ADD_IMAGE_END",a);return r}function k(a,c,d,e,f,g,h,i){a=a;e&&(a=b("AdsAssetFeedMutationUtils").setImageAssetAtIndex(a,c,d,f,g));i&&(a=b("AdsAssetFeedMutationUtils").setAssetFieldAtIndex(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,d,b("AdsAPIAdAssetFeedImagesFields").IMAGE_CROPS,b("immutable").fromJS(i)));if(h){a=b("AdsAssetFeedMutationUtils").setAssetFieldAtIndex(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,d,b("AdsAPIAdAssetFeedImagesFields").PORTRAIT_CUSTOMIZATIONS,b("immutable").fromJS((e={},e.specifications=[(f={},f.background_color=h,f)],e)))}return a}function l(a,c){return b("AdsAssetFeedMutationUtils").removeDuplicateAssets(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,b("AdsAPIAdAssetFeedImagesFields").ADLABELS)}function m(a,c,d,e){a=b("AdsAssetFeedMutationUtils").isolateAssetWithLabel(a,c,b("AdsUnifiedCreativeAPIFields").imageHash,d,b("AdsAPIAdAssetFeedImagesFields").ADLABELS,e);c=a.adgroupWithIsolatedAsset;d=a.isolatedAssetIndex;return{adgroupWithIsolatedImageAsset:c,isolatedImageAssetIndex:d}}f={isolateImageAssetWithLabel:m,setImage:a,setImageCrops:h,setImageThumbnail:j,removeDuplicateImageAssets:l,removeRedundantImageURL:c,addPlacementCustomizationImage:d,updateCustomizationImageAtIndex:k};e.exports=f}),null);
__d("AdsFeedApplicabilityUtils",["AdsPlacementAPISpecReaderUtils","adsPlacementAPISpecReaderIsActiveFacebookPosition","adsPlacementAPISpecReaderIsActivePublisherPlatform"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsPlacementAPISpecReaderUtils").convertCampaignToPlacementSpec_LEGACY,h=b("AdsPlacementAPISpecReaderUtils").isOnlyActiveFacebookInstreamVideosPlacement;function a(a){return b("adsPlacementAPISpecReaderIsActivePublisherPlatform")(g(a),"facebook")}function c(a){return b("adsPlacementAPISpecReaderIsActivePublisherPlatform")(a,"facebook")}function d(a){return b("adsPlacementAPISpecReaderIsActiveFacebookPosition")(a,"instream_video")}function f(a){return h(a)}e.exports={hasFacebookPlacement:a,placementSpecHasFacebookPlacement:c,placementSpecHasFacebookInstreamVideoPlacement:d,placementSpecHasFacebookInstreamVideosPlacementOnly:f}}),null);
__d("AdsInstagramIdentityUtils",["AdsLoadStateUtils_LEGACY"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){__p&&__p();var d=a;if(!d)return!0;if(!d.is_published){if(c)return!0;if(b.length===0)return!0}return b.some(function(a){return a.id===d.id})}function c(a,c,d){if(!b("AdsLoadStateUtils_LEGACY").isLoaded(c))return null;var e=c.page_backed_instagram_accounts;c=c.instagram_accounts;if((!a||d)&&c&&c.data&&c.data.length>0)return c.data[0];return e&&e.data&&e.data.length>0?e.data[0]:null}function d(a,c){if(!b("AdsLoadStateUtils_LEGACY").isLoaded(c))return!1;c=c.instagram_accounts;c=(c==null?void 0:(c=c.data)==null?void 0:c.length)||0;return!a&&c>0}e.exports={getEligibleInstagramAccount:c,isSelectedInstagramAccountAvailable:a,hasPublishedPageConnectedInstagramAccounts:d}}),null);
__d("AdsUEditorCampaignInstagramSelectors",["AdsAccountStore","AdsAPIObjectives","adsUEditorAccountSelector","gkx","isFalsey","AdsBusinessInstagramAccountProvider","AdsCPBUtils","AdsFeedApplicabilityUtils","AdsInstagramApplicabilityUtils","AdsInstagramAvailability","AdsInstagramIdentityUtils","AdsLoadState_LEGACY","AdsLoadStateUtils_LEGACY","AdsPageInstagramAccountStore","AdsPlacementsInstagramFeedPositionPlugin","AdsUEditorAdgroupBulkSelectors","AdsUEditorCampaignSelectors","AdsUniformValue","adsCreateSelector","adsCreateStoreSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("AdsBusinessInstagramAccountProvider").toFluxStore();a=b("AdsUEditorCampaignSelectors").eligibilityInformation;c=b("AdsUEditorCampaignSelectors").eligibilityInformationArray;var i={loadState:b("AdsLoadState_LEGACY").LOADED,data:[]};d=b("adsCreateStoreSelector")([b("AdsAccountStore"),h],function(){var a=b("AdsAccountStore").getSelectedAccount().getValue(),c=a==null?void 0:a.business;return!a||!c?i:b("AdsLoadStateUtils_LEGACY").fromLoadObjectTreatEmptyAsLoading(h.getState().get(a.account_id))},{name:e.id+".businessInstagramAccounts"});f=b("adsCreateStoreSelector")(function(a){return[].concat(b("adsUEditorAccountSelector").getStores(a),b("AdsUEditorAdgroupBulkSelectors").pageID.getStores(a),[b("AdsPageInstagramAccountStore")])},function(a){__p&&__p();var c=b("AdsUEditorAdgroupBulkSelectors").pageID(a);if(!(c instanceof b("AdsUniformValue")))return null;c=c.getValue();if(b("isFalsey")(c))return null;b("gkx")("1285331")&&b("AdsPageInstagramAccountStore").getWithLogging(c,"AdsUEditorCampaignInstagramSelectors.eligibleInstagramAccountID");c=b("AdsPageInstagramAccountStore").get(c);if(!b("AdsLoadStateUtils_LEGACY").isLoaded(c))return null;a=b("adsUEditorAccountSelector")(a);a=b("AdsInstagramIdentityUtils").getEligibleInstagramAccount(!!a.business,c);return a&&a.id?a.id:null},{name:e.id+".eligibleInstagramAccountID"});var j=(g=b("adsCreateSelector"))([c],function(a){return a.some(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramPlacement(a)})},{name:e.id}),k=g([c],function(a){return a.every(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramPlacement(a)})},{name:e.id}),l=g([c],function(a){return a.some(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramPlacementOnly(a)})},{name:e.id}),m=g([c],function(a){return a.every(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramPlacementOnly(a)})},{name:e.id}),n=g([c],function(a){return a.some(function(a){a=a.spec;return b("AdsFeedApplicabilityUtils").placementSpecHasFacebookPlacement(a)})},{name:e.id});a=g([b("AdsAccountStore").getSelectedAccount,b("adsUEditorAdObjectsForSelectedAdgroupsSelector"),a],function(a,c,d){__p&&__p();var e=c.some(function(a){var c=a.campaign;a=a.campaignGroup;var d=a.objective;return b("AdsCPBUtils").isCPBCampaign(a,c)&&(d===b("AdsAPIObjectives").LINK_CLICKS||d===b("AdsAPIObjectives").CONVERSIONS)});d=d&&b("AdsPlacementsInstagramFeedPositionPlugin").getIneligibilityReason(d);c=c.every(function(c){c=c.campaignGroup;c=c.objective;return b("AdsInstagramAvailability").supportsObjective(c,(c=a.getValue())==null?void 0:c.capabilities)});return c&&!e&&!d},{name:e.id});var o=g([c],function(a){return a.every(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramIGTVPlacementOnly(a)})},{name:e.id}),p=g([c],function(a){return a.every(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramStoryPlacementOnly(a)})},{name:e.id}),q=g([c],function(a){return a.every(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramStreamPlacementOnly(a)})},{name:e.id}),r=g([c],function(a){return a.some(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasIGTVPlacement(a)})},{name:e.id}),s=g([c],function(a){return a.some(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramIGTVPlacementOnly(a)})},{name:e.id}),t=g([c],function(a){return a.some(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasStoryPlacement(a)})},{name:e.id}),u=g([c],function(a){return a.some(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasInstagramStoryPlacementOnly(a)})},{name:e.id});c=g([c],function(a){return a.some(function(a){a=a.spec;return b("AdsInstagramApplicabilityUtils").placementSpecHasStreamPlacement(a)})},{name:e.id});g=g([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a){return a.every(function(a){a=a.adgroup;return b("AdsInstagramApplicabilityUtils").hasInstagramActor(a)})},{name:e.id});e.exports={allHaveInstagramActor:g,allHaveInstagramPlacement:k,allHaveInstagramPlacementOnly:m,allHaveInstagramIGTVPlacementOnly:o,allHaveInstagramStoryPlacementOnly:p,allHaveInstagramStreamPlacementOnly:q,businessInstagramAccounts:d,eligibleInstagramAccountID:f,isInstagramEligibile:a,someHaveInstagramPlacement:j,someHaveInstagramPlacementOnly:l,someHaveInstagramIGTVPlacement:r,someHaveInstagramIGTVPlacementOnly:s,someHaveInstagramStoryPlacement:t,someHaveInstagramStoryPlacementOnly:u,someHaveInstagramStreamPlacement:c,someHaveFacebookPlacement:n}}),null);
__d("AdsDynamicAdCustomizationCustomizationSpecUtils",["invariant","AdsAPIAdgroupPaths","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={AllCustomizationSpecPaths:[b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.CUSTOMIZATION_RULES_SPEC,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.VIDEO_DATA.CUSTOMIZATION_RULES_SPEC,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.TEMPLATE_DATA.CUSTOMIZATION_RULES_SPEC],getCustomizationSpecPathFromAdgroup:function(a){a=(a=a.creative)==null?void 0:a.object_story_spec;if((a==null?void 0:a.link_data)!=null)return b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.CUSTOMIZATION_RULES_SPEC;return(a==null?void 0:a.video_data)!=null?b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.VIDEO_DATA.CUSTOMIZATION_RULES_SPEC:b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.TEMPLATE_DATA.CUSTOMIZATION_RULES_SPEC},getCustomizationRuleIndexForLanguage:function(a,b){return a.findIndex(function(a){a=a.get("customization_spec");return a!=null&&typeof a!=="string"&&a.get("language")===b})},getCustomizationSpecFromAdgroup:function(a){var c=h.getCustomizationSpecPathFromAdgroup(a);return a.getIn(c)||b("immutable").List()},isPrimaryRule:function(a){return a.count()===1&&h.getLanguageFromRule(a)!==void 0},getCustomizationSpecFromCreative:function(a){var b;b=(b=a.object_story_spec)==null?void 0:(b=b.link_data)==null?void 0:b.customization_rules_spec;if(b!=null)return b;b=(b=a.object_story_spec)==null?void 0:(b=b.video_data)==null?void 0:b.customization_rules_spec;if(b!=null)return b;b=(b=a.object_story_spec)==null?void 0:(a=b.template_data)==null?void 0:a.customization_rules_spec;return b!=null?b:[]},hasCustomizationSpecFromCreative:function(a){a=h.getCustomizationSpecFromCreative(a);return Array.isArray(a)&&a.length>0},getLanguageFromRule:function(a){a=(a||b("immutable").Map()).get("customization_spec");typeof a!=="string"||g(0,1025);return(a||b("immutable").Map()).get("language")}};e.exports=h}),null);
__d("DynamicAdsProductSalesChannel",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ONLINE:"online",IN_STORE:"in_store",OMNI:"omni"})}),null);
__d("DynamicCategorizationCriteria",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BRAND:"brand",CATEGORY:"category",PRODUCT_TYPE:"product_type"})}),null);
__d("AdsDynamicAdsUtils",["AdsBulkValueUtils","AdsCallToActionTypesCond","AdsDynamicAdsFormatUtils","AdsDynamicTargetingCategories","AdsPromotedObjectTypes","CatalogVertical","DynamicAdsProductSalesChannel","DynamicCategorizationCriteria","adsAccountGK","enumUtils","immutable","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("enumUtils").enumValueToKey,h={areAllDynamicAds:function(a,c){__p&&__p();if(a===null)return b("AdsBulkValueUtils").getUniformValueOrDefault(c)===b("AdsPromotedObjectTypes").PRODUCT_SET;if(c===null){if(!a)throw b("unrecoverableViolation")("bulkProductSetID should not be null","dpa");return a.getValues().every(function(a){return!!a})}var d=!1;c&&a&&(d=c.getValues().every(function(c,d){d=a?a.getValueForIndex(d):null;return c===b("AdsPromotedObjectTypes").PRODUCT_SET||d}));return d},getIncompleteCategoryAssets:function(a){return a.filter(function(a){return a.name==null||a.name===""||a.destination_uri==null||a.destination_uri===""})},getCategoryAssetsToRender:function(a,b,c,d,e){b=b.map(function(a,b){return{asset:a,index:b}});c&&(b=b.filter(function(b){return!a.get(b.index).name||!a.get(b.index).destination_uri}));d!==""&&(b=b.filter(function(b){return a.get(b.index).criteria_value.toUpperCase().indexOf(d.toUpperCase())>-1}));return h.getSortedCategoryAssetsToRender(b,e)},getSortedCategoryAssetsToRender:function(a,b){__p&&__p();switch(b){case"sort_by_title_alphabet":return a.sort(function(a,b){a=a.asset;b=b.asset;return a.criteria_value<b.criteria_value?-1:1});case"sort_by_title_reverse_alphabet":return a.sort(function(a,b){a=a.asset;b=b.asset;return b.criteria_value<a.criteria_value?-1:1});case"sort_by_product_count_ascend":return a.sort(function(a,b){a=a.asset;b=b.asset;return a.num_items-b.num_items});case"sort_by_product_count_descend":return a.sort(function(a,b){a=a.asset;b=b.asset;return b.num_items-a.num_items})}return a},getUpdatedAssetsForPOST:function(a,b){return b.map(function(b){return{categorization_criteria:a,criteria_value:b.criteria_value,image_url:b.image_url,name:b.name,destination_uri:b.destination_uri,description:b.description}}).toArray()},isDogCheckFailed:function(a,b){if(a.isDone()&&a.hasValue()){a=a.getValueEnforcing();return!!a.get(b)&&a.get(b).result==="failed"}return!0},getCriteriaWrapper:function(a){return a.entrySeq().toArray().map(function(a){var b=a[0];a=a[1];var c=0,d=0;a.isDone()&&a.hasValue()&&(c=a.getValueEnforcing().size,d=c-h.getIncompleteCategoryAssets(a.getValueEnforcing()).size);return{criteria:b,totalCount:c,completeCount:d}})},getDefaultCategorizationCriteria:function(a){var b={criteria:"brand",completeCount:0,totalCount:0},c=4;return a.reduce(function(a,b){if(b.completeCount>=c||a.completeCount>=c)return b.completeCount>a.completeCount?b:a;return b.totalCount>=c?b.totalCount>a.totalCount?b:a:a},b).criteria},hasCategorizationCriteriaInAdgroup:function(a){return!!((a=a.creative)==null?void 0:a.categorization_criteria)},adgroupSupportsOverlays:function(a){a=b("AdsDynamicAdsFormatUtils").getAdgroupFormatOption(a);return h.formatOptionSupportsOverlays(a)},formatOptionSupportsOverlays:function(a){return a==="carousel_images_multi_items"||a==="single_image"},isDynamicAdForRetail:function(a){a=a==null?void 0:(a=a.creative)==null?void 0:(a=a.recommender_settings)==null?void 0:a.product_sales_channel;return a==="omni"||a===g("omni",b("DynamicAdsProductSalesChannel"))||a==="in_store"||a===g("in_store",b("DynamicAdsProductSalesChannel"))},allowStaticFallback:function(a,c,d){if(d==null)return!1;return d===b("CatalogVertical").FLIGHTS||b("adsAccountGK")._(a,"3nxv84yE4")&&d===b("CatalogVertical").HOTELS?c===b("AdsDynamicTargetingCategories").PROSPECTING:!1},isMessengerDynamicAds:function(a){var c;c=a==null?void 0:(c=a.creative)==null?void 0:(c=c.object_story_spec)==null?void 0:(c=c.template_data)==null?void 0:(c=c.call_to_action)==null?void 0:c.type;a=(a=a.creative)==null?void 0:a.product_set_id;return a!=null&&c===b("AdsCallToActionTypesCond").TYPES.MESSAGE_PAGE.name},isDynamicAd:function(a){return((a=a.creative)==null?void 0:a.product_set_id)!=null}};e.exports=h}),null);
__d("AdsMovieAdsUtils",["AdsAPIBillingEvents","AdsAPIObjectives","isTruthy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={MOVIE_ID_PLACEHOLDER:"",canSupportMovieOption:function(a){__p&&__p();return a.every(function(a){__p&&__p();var c,d,e=a.campaignGroup.objective;c=(c=a.campaign.promoted_object)==null?void 0:c.offer_id;d=(d=a.adgroup.creative)==null?void 0:d.object_type;var f=a.campaign.billing_event;a=(a=a.adgroup.creative)==null?void 0:(a=a.object_story_spec)==null?void 0:(a=a.video_data)==null?void 0:(a=a.call_to_action)==null?void 0:(a=a.value)==null?void 0:a.movie_id;if(b("isTruthy")(a))return!0;if(d!=="VIDEO")return!1;return b("isTruthy")(c)?!1:e===b("AdsAPIObjectives").VIDEO_VIEWS||e===b("AdsAPIObjectives").LINK_CLICKS&&f!==b("AdsAPIBillingEvents").LINK_CLICKS||e===b("AdsAPIObjectives").CONVERSIONS&&f!==b("AdsAPIBillingEvents").LINK_CLICKS})},generateMovieURL:function(a){return"www.facebook.com/movies/"+a.toString()+"/?ref_surface=ad&ref_mechanism=surface"},isMovieAds:function(a){a=(a=a.creative)==null?void 0:(a=a.object_story_spec)==null?void 0:(a=a.video_data)==null?void 0:(a=a.call_to_action)==null?void 0:(a=a.value)==null?void 0:a.movie_id;return a!=null}};e.exports=a}),null);
__d("AdsPageLikeUtils",["AdsAdgroupUtils","AdsAPIObjectives"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={convertPageTabLinkAndPageToLinkUrl:function(a,b){return a+b.split("/").slice(2).join("/")},isPageLikeVideo:function(a,c){if(c===b("AdsAPIObjectives").PAGE_LIKES){a=a==null?void 0:(c=a.creative)==null?void 0:c.object_type;c=b("AdsAdgroupUtils").getMediaFormatForObjectType(a);if(c==="VIDEO")return!0}return!1},isPageLikeCTAType:function(a){return a!==null&&a!==""&&a==="LIKE_PAGE"}};e.exports=a}),null);